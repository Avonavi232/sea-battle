{"version":3,"sources":["utils/lettersGrid.js","config/config.js","img/aim.svg","img/hit.svg","img/circle-sketch.svg","components/SquareContainer.js","styled.js","utils/constants.js","actions/actions.js","actions/actionTypes.js","utils/ships.js","utils/functions.js","utils/gameConnection.js","utils/soundsQueue.js","sounds/soundsBank.js","components/Timer.js","img/settings.svg","components/TopDrawer.js","img/volume-on.svg","img/volume-off.svg","components/SettingsPanel/VolumeSetting.js","components/SettingsPanel/SettingsPanel.js","components/withCountdownTimer.js","components/OpponentDisconnectedModal.js","components/RoomCreator.js","img/locked.svg","img/unlocked.svg","components/OnlineRooms.js","components/JoinRoomPage/JoinRoomPage.js","components/ShipsPlacementPanel/ShipPlacementPanel.js","components/ShipsPlacementPage/ShipsPlacementPage.js","App.js","reducers/rootReducer.js","store/store.js","index.js","img/paper.jpg","sounds/miss2.mp3","sounds/miss3.mp3","sounds/shipHit.wav"],"names":["config","boardSize","alphabete","apiUrl","letters","digits","i","push","x","y","content","toUpperCase","symbols","concat","hoversGrid","_extends","Object","assign","target","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","aim_ref2","react_default","a","createElement","d","aim_SvgAim","_ref","svgRef","props","viewBox","xmlSpace","ref","ForwardRef","forwardRef","__webpack_require__","p","hit_extends","hit_objectWithoutProperties","hit_objectWithoutPropertiesLoose","hit_ref2","hit_SvgHit","hit_ForwardRef","circle_sketch_extends","circle_sketch_objectWithoutProperties","circle_sketch_objectWithoutPropertiesLoose","circle_sketch_ref2","circle_sketch_SvgCircleSketch","circle_sketch_ForwardRef","SquaredContainer","innerClassName","objectWithoutProperties","innerRef","useRef","outerRef","onResizeHandler","debounce","outer","current","inner","height","offsetHeight","width","offsetWidth","min","Math","style","fontSize","useEffect","window","addEventListener","removeEventListener","className","children","breakpoints","xl","lg","md","sm","mediaUp","reduce","acc","label","theme","cellColor","inkColor","greenInkColor","redInkColor","cellLineWidth","boardFontSize","breakpointUp","objectSpread","GlobalStyle","createGlobalStyle","_templateObject","App","styled","div","withConfig","displayName","componentId","paper","Grid","MoveIndicator","shooter","boardGrid","css","_templateObject3","Board","SquareContainer_SquaredContainer","color","undefined","_templateObject2","cellBg","MyBoard","OpponentBoard","cellHoverBase","_templateObject4","Cell","_ref2","w","h","attrs","_ref3","gridArea","AimCell","ShipCell","ShipPlacementCell","ShotHitCell","ShipDieCell","ShotMissCell","LetterCell","gameStatuses","initialServer","waitingServer","waitingClient","shipPlacement","active","end","connectError","onEvents","emitEvents","busEvents","placeShip","opponentShoot","setNotPlacedShips","ships","type","payload","addPlayerShip","ship","eventsBus","subscribe","catchShoot","updatePlayerShip","setCurrent","addShotToMap","shots","addOpponentShotToMap","shot","assignShooter","iAmShooter","toggleOpponentDisconnectedModal","isOpen","setRoomSettings","settings","setGameStatus","status","resetState","BasicShip","params","dispatch","_this","classCallCheck","hasPart","parts","types","hit","isDie","kill","id","uuid","Function","pos","createClass","value","set","direction","isNumeric","start","recreate","shipData","QuadrupleShip","_BasicShip4","_getPrototypeOf5","_this5","_len4","args","Array","_key4","possibleConstructorReturn","getPrototypeOf","inherits","getDeepProp","object","path","split","xs","n","isNaN","parseFloat","isFinite","between","number","from","to","callbacks","create","eventName","callback","filter","cb","emit","map","getMapToGrid","converter","items","getComponent","onClick","item","index","gridX","gridY","Component","mapToGridShiftBy1","mapToGridShiftBy2","mapShipsToGrid","shipPart","Styled","values","fn","delay","timer","_len","_key","clearTimeout","setTimeout","shipPlacementValidator","rules","addRule","ruleCallback","validate","coords","shipToPlace","field","_i","_rules","rule","shipPlacementValidatorCreator","checkDirection","gameConnection","GameConnection","_restoreGameHistory","JSON","parse","localStorage","getItem","e","console","error","connectToRoom","roomID","reconnectingPlayerID","playerID","rest","_knockToRoom","password","then","result","restoreGame","events","_this2","socket","io","Promise","resolve","on","_this3","forEach","eventHandler","_this4","reject","success","Error","axios","get","data","catch","playerIDsave","_this6","location","search","restored","_initSocketConnection","_subscribeSocketToEvents","createPlayer","_playerInit","gameStatus","post","responce","playerShipsData","_this7","_ref5","slicedToArray","_ref4","_this8","connected","soundsQueue","SoundsQueue","_playSound","audio","volume","play","_clearAudioQueue","onended","_playSoundQueue","currentlyPlayed","recursive_play","queue","pop","_addToQueue","sound","unshift","soundsBank","SoundsBank","addSound","sounds","Audio","getRandomWithType","soundsWithType","floor","random","getIndexWithType","miss2","miss3","hit1","Timer","state","deadline","moment","duration","intervalID","init","clearInterval","setInterval","newDuration","clone","seconds","subtract","setState","minutes","StyledTimer","Timer_templateObject","propTypes","PropTypes","isRequired","settings_extends","settings_objectWithoutProperties","settings_objectWithoutPropertiesLoose","settings_ref2","settings_ref3","settings_SvgSettings","enableBackground","settings_ForwardRef","Outer","opened","Opener","button","TopDrawer","toggleOpen","open","shown","transition","opacity","display","transform","transforms","closed","requestAnimationFrame","toggleShown","React","createRef","Inner","_this$state","ReactDOM","createPortal","Fragment","onTransitionEnd","stopPropagation","document","querySelector","volume_on_extends","volume_on_objectWithoutProperties","volume_on_objectWithoutPropertiesLoose","volume_on_ref2","volume_on_ref3","volume_on_ref4","volume_on_SvgVolumeOn","volume_on_ForwardRef","volume_off_extends","volume_off_objectWithoutProperties","volume_off_objectWithoutPropertiesLoose","volume_off_ref2","volume_off_ref3","volume_off_SvgVolumeOff","volume_off_ForwardRef","VolumeButton","VolumeSetting","_useState","useState","_useState2","inputVolume","setInputVolume","_useState3","_useState4","volumeMemo","setVolumeMemo","volumeChangeHandler","update","max","onChange","persist","DrawerInner","SettingsPanel","components_TopDrawer","SettingsPanel_VolumeSetting","setVolume","connect","withCountdownTimer","WrappedComponent","_Component","CountdownTimer","toObject","hours","customStyles","overlay","position","top","left","right","bottom","backgroundColor","alignItems","justifyContent","border","backgroundImage","backgroundSize","overflow","borderRadius","padding","Modal","setAppElement","opponentDisconnectedModalOpen","roomDestroyDeadline","react_modal_lib_default","OpponentDisconnectedModal_Timer","onConfirmLeaveRoom","RoomCreator","handleSubmit","event","preventDefault","createRoom","handleInputChange","defineProperty","name","checked","Number","privateRoom","onSubmit","placeholder","htmlFor","locked_extends","locked_objectWithoutProperties","locked_objectWithoutPropertiesLoose","locked_ref2","locked_SvgLocked","locked_ForwardRef","unlocked_extends","unlocked_objectWithoutProperties","unlocked_objectWithoutPropertiesLoose","unlocked_ref2","unlocked_SvgUnlocked","unlocked_ForwardRef","RoomsTable","table","VerticalAligned","span","StyledPrivateIcon","isPrivate","LockedIcon","UnlockedIcon","Col","OnlineRooms","knockToRoomHandler","connectionData","isProtected","prompt","res","roomEnteredHandler","roomUrl","origin","leaveRoomHandler","emitLeaveRoom","history","pushState","leaveRoomButton","knockToRoomButton","getRoomsRowsLayout","roomsData","_this$props","roomData","protected","online","size","onlineRooms","scope","Page","Flex","flexItem","JoinRoomPage_templateObject","StyledOnlineRooms","Separator","PageTitle","h1","TableTitle","h2","JoinRoomPage","components_OnlineRooms","components_RoomCreator","Container","NotPlaced","Ship","vertical","toConsumableArray","HoverShip","CurrentShip","Panel","Title","StyledSwitch","Switch","SwitchContainer","ShipPlacementPanel","notPlacedShips","getNextNotPlaced","playerShips","cache","slice","splice","nextNotPlaced","emitPlacementDone","shipsToPlace","quadruple","unsubscribe","currentDirection","_this$props2","single","double","triple","onChangeHandler","ShipsPlacementPage","form","flattenPlayerShips","getAvailablePlaces","goingToBePlaced","ShipsPlacementPage_Container","ShipsPlacementPanel_ShipPlacementPanel","marginRight","saveGameSettings","setItem","stringify","removeItem","shipsMap","opponentShotsMap","playerShotsMap","startShipPlacementHandler","opponentShootHandler","el","startGameHandler","assignShooterHandler","shooterID","shootTime","timerKey","shoot","emitShot","shipID","playSoundType","leaveRoom","options","resetGameState","modalIsOpen","toggleModal","endGameHandler","initConnection","gameEvents","reconnect","obj","gameResult","styled_App","components_SettingsPanel_SettingsPanel","components_OpponentDisconnectedModal","components_JoinRoomPage_JoinRoomPage","components_ShipsPlacementPage_ShipsPlacementPage","onRequestClose","aliveShipsCount","shotsMap","components_Timer","setRoomDestroyDeadline","updateOnlineRooms","stats","setGameResult","phase","initialState","chatEnable","maxScore","roomURL","side","handlers","_handlers","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","updatedOnlineRooms","delete","_ref15","reducer","action","handler","createReducer","store","createStore","composeWithDevTools","applyMiddleware","thunkMiddleware","render","es","styled_components_browser_esm","src_App","getElementById","module","exports"],"mappings":"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","file":"static/js/main.25529758.chunk.js","sourcesContent":["import config from '../config';\r\n\r\nconst letters = [], digits = [];\r\n\r\nfor (let i = 0; i < config.boardSize; i++) {\r\n    letters.push({\r\n        x: i + 1,\r\n        y: 0,\r\n        content: config.alphabete[i].toUpperCase()\r\n    });\r\n    digits.push({\r\n        x: 0,\r\n        y: i + 1,\r\n        content: i + 1\r\n    });\r\n}\r\n\r\nexport const symbols = [].concat(letters, digits);\r\n\r\n\r\nexport const hoversGrid = [];\r\n\r\nfor (let y = 0; y < config.boardSize; y++) {\r\n    for (let x = 0; x < config.boardSize; x++) {\r\n        hoversGrid.push({ x, y });\r\n    }\r\n}\r\n","export default {\r\n  boardSize: 10,\r\n  alphabete: 'abcdefghijklmnopqrstuvwxyz',\r\n  apiUrl: process.env.NODE_ENV === 'production' ? 'https://mighty-gorge-21935.herokuapp.com' : 'http://192.168.2.54:5000'\r\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M477.546,228.616h-53.567c-9.827-80.034-74.019-143.608-154.719-153.134V20.321 C269.259,9.096,260.155,0,248.938,0c-11.226,0-20.321,9.096-20.321,20.321v54.974c-81.375,8.941-146.257,72.808-156.15,153.313 H20.321C9.096,228.608,0,237.704,0,248.929s9.096,20.321,20.321,20.321H72.19c8.99,81.513,74.328,146.428,156.426,155.451v52.844 c0,11.226,9.096,20.321,20.321,20.321c11.217,0,20.321-9.096,20.321-20.321v-53.023c81.416-9.608,146.054-74.222,154.996-155.264 h53.291c11.226,0,20.321-9.096,20.321-20.321S488.771,228.616,477.546,228.616z M269.259,383.392v-67.028 c0-11.226-9.104-20.321-20.321-20.321c-11.226,0-20.321,9.096-20.321,20.321v67.24c-59.607-8.551-106.753-55.299-115.312-114.345 h68.207c11.226,0,20.321-9.096,20.321-20.321s-9.096-20.321-20.321-20.321h-67.882c9.38-58.046,56.103-103.761,114.987-112.215 v65.11c0,11.226,9.096,20.321,20.321,20.321c11.217,0,20.321-9.096,20.321-20.321v-64.899 c58.209,8.982,104.249,54.421,113.556,112.004h-66.459c-11.226,0-20.321,9.096-20.321,20.321s9.096,20.321,20.321,20.321h66.793 C374.646,327.842,328.191,374.297,269.259,383.392z\"\n});\n\nvar SvgAim = function SvgAim(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 497.867 497.867\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgAim, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/aim.93232405.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M183.455,50.228c-0.119-0.121-0.256-0.227-0.376-0.346c-0.144-2.28-0.375-4.543-0.658-6.796 c1.008-0.688,1.313-2.464,0.451-3.487c-0.367-0.435-0.771-0.846-1.168-1.262c-1.366-7.702-3.708-15.173-7.544-22.213 c2.76-1.833,2.644-7.145-1.241-8.141c-34.754-8.906-72.091,2.067-107.614-3.356C53.704,2.855,20.385-6.396,14.081,7.65 c-1.862-0.487-4.136,0.507-4.227,3.052c-1.175,33.095-1.294,66.212-2.863,99.3c-0.876,18.487-8.729,45.77,3.792,61.646 c1.303,1.654,3.034,1.316,4.247,0.218c12.971,13.903,43.069,14.479,60.049,14.98c0.092,0.104,0.189,0.202,0.28,0.308 c1.237,1.404,2.869,0.905,3.766-0.234c28.932,0.633,58.04-3.325,86.529-7.989c0.212,0.19,0.415,0.396,0.627,0.585 c3.132,2.797,6.948-1.319,4.49-4.49c-0.118-0.152-0.247-0.301-0.366-0.453c1.259-0.625,2.286-1.834,2.502-3.708 c3.238-28.057,6.058-56.372,8.754-84.508c1.006-10.504,1.917-21.269,1.629-31.849C184.336,53.381,184.724,51.509,183.455,50.228z  M169.584,16.651c1.079,4.529,1.852,9.141,2.434,13.797c-1.989-1.426-3.962-2.844-5.769-4.338 c-3.948-3.266-7.75-6.711-11.762-9.896C159.53,16.222,164.567,16.313,169.584,16.651z M149.452,16.248 c0.074,0.149,0.156,0.296,0.291,0.426c4.911,4.728,10.032,9.246,15.011,13.904c2.57,2.404,5.204,5.118,8.036,7.518 c0.083,1.045,0.183,2.087,0.248,3.136c-3.803-2.966-7.686-5.848-11.322-8.904c-5.9-4.96-11.297-10.3-16.327-16.053 C146.744,16.245,148.097,16.265,149.452,16.248z M15.946,164.688c-0.849-6.355-1.179-12.633-1.251-18.891 c7.963,10.244,17.076,20.935,27.823,27.828C33.3,171.574,24.951,166.874,15.946,164.688z M51.841,175.189 c-0.084-0.283-0.232-0.562-0.541-0.813c-6.92-5.607-14.297-10.392-20.845-16.507c-5.683-5.309-10.832-11.182-15.784-17.187 c0.055-4.753,0.265-9.509,0.511-14.276c16.138,17.39,33.989,33.091,50.437,50.227C61.013,176.29,56.415,175.84,51.841,175.189z  M86.844,177.221c-4.449,0.097-8.897,0.021-13.341-0.146c-17.537-19.501-37.517-37.836-58.163-53.795 c0.328-5.87,0.688-11.791,0.969-17.781c3.91,11.804,17.197,23.038,24.998,30.696c14.926,14.652,31.23,27.915,47.564,40.956 C88.195,177.17,87.52,177.206,86.844,177.221z M94.155,176.974c0.736-1.019,0.847-2.361-0.446-3.366 c-27.488-21.325-58.583-43.3-76.364-73.782c-0.178-0.305-0.48-0.427-0.796-0.473c0.189-4.991,0.293-9.993,0.412-14.992 c24.614,31.673,50.98,70.942,85.949,92.091C99.991,176.627,97.079,176.857,94.155,176.974z M112.669,175.837 c-36.659-27.825-66.27-60.093-95.6-95.425c0.117-5.767,0.189-11.537,0.22-17.307c37.83,34.935,68.273,78.158,107.231,111.627 C120.574,175.14,116.625,175.517,112.669,175.837z M132.209,173.856C95.508,134.756,58.506,93.318,17.284,58.956 c0.011-5.561-0.06-11.122-0.12-16.682C62.907,83.234,102.981,128.94,146.39,172.02 C141.667,172.677,136.942,173.301,132.209,173.856z M154.197,170.865c-5.305-6.597-10.81-13.124-16.459-19.589 c6.16,6.588,12.425,13.032,18.867,19.22C155.801,170.616,154.999,170.744,154.197,170.865z M163.954,166.578 c-25.071-30.659-54.699-58.723-81.819-87.286C66.274,62.586,50.527,45.699,34.076,29.567c-2.268-2.224-12.044-14.94-16.356-12.891 c-0.368,0.175-0.282,0.672,0,0.867c6.415,4.446,13.052,15.337,18.541,21.249C51.986,55.73,67.527,72.845,83.103,89.918 c12.47,13.669,24.72,28.032,37.225,42.177C88.46,98.208,52.81,66.564,17.425,38.48c-0.093-0.074-0.192-0.101-0.289-0.15 c-0.127-9.217-0.326-18.43-0.65-27.627c-0.007-0.195-0.086-0.335-0.118-0.512c3.987-0.561,8.092-0.688,12.242-0.61 c17.813,24.72,38.444,47.53,59.428,69.556c22.999,24.143,46.279,50.161,72.062,71.321c1.487,1.221,3.144,0.83,4.07-0.214 C163.833,155.723,163.69,161.179,163.954,166.578z M171.393,92.013c-0.988,10.312-2.683,20.873-4.222,31.492 c-38.366-37.284-74.3-82.057-119.577-110.951c-1.75-1.117-3.137,1.518-1.582,2.707c44.257,33.82,75.357,81.453,119.339,115.05 c0.27,0.206,0.545,0.297,0.818,0.389c-0.721,5.391-1.36,10.786-1.785,16.163c-0.09-0.146-0.131-0.295-0.248-0.438 c-19.873-24.045-45.02-44.561-67.22-66.473C74.212,57.541,52.877,34.233,32.544,9.714c13.824,0.779,28.116,4.043,41.269,6.005 c10.686,17.886,25.375,32.609,40.761,46.735c16.228,14.897,33.017,32.429,51.031,45.002c2.156,1.505,4.97-1.437,3.574-3.574 c-10.839-16.607-31.394-28.996-46.484-41.569c-16.435-13.691-32.603-28.357-44.731-46.046c4.133,0.507,8.285,0.818,12.449,1.027 c0.018,0.368,0.187,0.715,0.606,0.895c19.018,8.144,34.447,23.127,49.203,37.244c9.647,9.231,19.731,23.779,31.678,30.946 C171.731,88.258,171.571,90.15,171.393,92.013z M172.628,77.25c-9.475-10.452-21.787-19.802-31.779-28.859 c-13.232-11.992-27.841-24.404-44.728-30.932c7.866,0.19,15.774-0.009,23.693-0.295c9.881,8.862,19.645,17.859,29.43,26.828 c7.353,6.74,15.194,16.088,24.031,21.49C173.116,69.421,172.908,73.351,172.628,77.25z M153.139,40.099 c-9.164-7.809-18.347-15.576-27.707-23.139c4.982-0.2,9.967-0.388,14.948-0.545c8.812,12.465,20.876,23.966,33.029,33.588 c0.041,2.152,0.104,4.303,0.086,6.458C167.087,50.602,159.425,45.456,153.139,40.099z\"\n});\n\nvar SvgHit = function SvgHit(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 188.011 188.011\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgHit, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/hit.8cf451d2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M98.069,3.567C5.46-26.087-29.4,137.675,46.545,179.472c52.597,28.947,111.642-3.116,132.632-54.666 C200.722,71.894,164.031-13.013,98.069,3.567z M161.591,42.214c-3.967-3.02-8.014-5.806-11.332-8.391 c-7.941-6.187-16.005-12.354-24.243-18.218C141.375,20.209,153.354,29.763,161.591,42.214z M115.303,13.258 c10.333,8.188,20.959,15.974,31.097,24.424c7.915,6.597,15.195,15.814,23.648,21.821c1.244,3.588,2.283,7.278,3.052,11.069 c-23.456-20.225-49.009-37.958-72.715-57.903C105.62,12.399,110.586,12.622,115.303,13.258z M40.331,163.69 c-13-10.231-20.536-24.626-24.059-40.328c6.923,8.747,14.194,17.215,21.562,25.593c7.937,9.026,16.21,18.99,25.504,27.161 C55.279,173.417,47.504,169.336,40.331,163.69z M72.798,178.633c-8.611-10.354-19.515-19.269-28.876-28.932 c-10.121-10.447-19.496-21.515-28.851-32.631c-1.071-6.915-1.404-14.003-1.149-21.039c28.021,27.594,53.474,59.775,85.003,83.329 C90.264,180.519,81.438,180.338,72.798,178.633z M105.705,178.176c-29.979-28.74-60.329-57.841-91.609-85.21 c0.266-4.357,0.789-8.668,1.476-12.904c35.773,29.263,67.896,61.728,99.427,95.528 C111.946,176.622,108.844,177.492,105.705,178.176z M120.729,173.399c-0.105-0.187-0.167-0.377-0.324-0.556 c-31.128-35.203-66.709-67.771-104.238-96.181c0.699-3.685,1.552-7.281,2.535-10.771c36.152,35.017,73.577,68.716,109.643,103.838 C125.855,171.065,123.326,172.312,120.729,173.399z M132.975,167.063c-0.112-0.349-0.295-0.693-0.569-1.022 c-32.123-38.68-74.338-70.367-113.032-102.464c1.428-4.646,3.179-9.042,5.186-13.201c13.153,21.709,36.624,39.021,55.464,55.098 c20.847,17.79,41.538,37.476,63.608,53.806C140.259,162.137,136.708,164.758,132.975,167.063z M147.791,155.52 c-15.854-19.474-40.057-34.427-59.463-49.803C65.788,87.857,45.75,68.654,25.566,48.418c1.828-3.552,3.885-6.88,6.117-10.009 c19.169,16.599,39.098,32.292,58.7,48.375c23.146,18.992,42.916,40.489,64.581,60.803 C152.711,150.376,150.344,153.054,147.791,155.52z M164.232,133.485c-1.715,3.344-3.695,6.481-5.808,9.502 c-14.605-21.992-38.959-39.271-59.25-55.373c-21.82-17.314-44.458-33.547-66.1-51.08c3.109-4.086,6.583-7.736,10.353-10.948 C79.883,61.98,120.45,95.092,159.494,128.563c2.947,2.527,7.057-1.443,4.302-4.303c-35.786-37.146-79.91-65.757-118.04-100.569 c2.91-2.257,6.009-4.216,9.248-5.922c20.675,15.953,41.714,31.41,62.055,47.802c19.695,15.871,35.688,34.224,53.81,51.34 C169.18,122.554,166.987,128.113,164.232,133.485z M172.924,108.711c-10.546-17.354-32.468-31.62-47.254-43.333 c-21.754-17.233-44.577-33.145-67.166-49.274c3.777-1.693,7.744-3.017,11.885-3.938c-0.008,0.369,0.147,0.742,0.584,0.994 c39.575,22.878,67.944,57.878,103.467,85.637C174.103,102.104,173.607,105.414,172.924,108.711z M73.293,11.617 c5.974-1.035,12.28-1.266,18.895-0.523c0.652,1.231,1.858,2.1,3.645,1.919c0.459-0.047,0.901-0.063,1.357-0.102 c24.702,23.525,51.958,44.16,77.302,66.991c0.363,3.774,0.511,7.599,0.414,11.452C143.021,63.272,111.516,30.345,73.293,11.617z\"\n});\n\nvar SvgCircleSketch = function SvgCircleSketch(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 190.408 190.407\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgCircleSketch, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/circle-sketch.d7451bc8.svg\";\nexport { ForwardRef as ReactComponent };","import React, {useEffect, useRef} from 'react';\r\nimport {debounce} from \"../utils/functions\";\r\n\r\nexport const SquaredContainer = ({innerClassName, ...props}) => {\r\n    const\r\n        innerRef = useRef(null),\r\n        outerRef = useRef(null);\r\n\r\n    const onResizeHandler = debounce(() => {\r\n        const\r\n            outer = outerRef.current,\r\n            inner = innerRef.current,\r\n            height = outer.offsetHeight,\r\n            width = outer.offsetWidth,\r\n            min = Math.min(height, width);\r\n\r\n        inner.style.width = `${min}px`;\r\n        inner.style.height = `${min}px`;\r\n        inner.style.fontSize = `${min / 11}px`; //TODO подумать, куда лучше перенести fontSize\r\n    }, 100);\r\n\r\n    useEffect(() => {\r\n        onResizeHandler();\r\n        window.addEventListener('resize', onResizeHandler);\r\n\r\n        return () => window.removeEventListener('resize', onResizeHandler);\r\n    }, []);\r\n\r\n    return(\r\n        <div {...props} ref={outerRef}>\r\n            <div className={innerClassName} ref={innerRef}>\r\n                {props.children}\r\n            </div>\r\n        </div>\r\n    )\r\n};","import React from 'react';\r\nimport styled, {css, createGlobalStyle} from 'styled-components/macro';\r\n\r\nimport {ReactComponent as AimIcon} from './img/aim.svg';\r\nimport {ReactComponent as HitIcon} from './img/hit.svg';\r\nimport {ReactComponent as MissIcon} from './img/circle-sketch.svg';\r\nimport paper from './img/paper.jpg';\r\nimport config from './config';\r\nimport {SquaredContainer} from \"./components/SquareContainer\";\r\n\r\nconst breakpoints = {\r\n    xl: 1200,\r\n    lg: 992,\r\n    md: 768,\r\n    sm: 576,\r\n};\r\n\r\nconst mediaUp = Object.keys(breakpoints).reduce((acc, label) => {\r\n    acc[label] = `(min-width: ${breakpoints[label]}px)`;\r\n    return acc;\r\n}, {});\r\n\r\nexport const theme = {\r\n    cellColor: '#d1d6ff',\r\n    inkColor: '#2EABEC',\r\n    greenInkColor: '#28a645',\r\n    redInkColor: '#da3545',\r\n    cellLineWidth: '1px',\r\n    boardFontSize: '36px',\r\n    boardSize: config.boardSize,\r\n    breakpointUp: {...mediaUp}\r\n};\r\n\r\n\r\nexport const GlobalStyle = createGlobalStyle`\r\n  @import url('https://fonts.googleapis.com/css?family=Roboto:300,400');\r\n  @import url('https://fonts.googleapis.com/css?family=Patrick+Hand');\r\n  body {\r\n    margin: 0;\r\n    padding: 0;\r\n    font-family: Roboto, sans-serif;\r\n  }\r\n  * {\r\n    box-sizing: border-box;\r\n  }\r\n`;\r\n\r\nexport const cellBg = (color = theme.cellColor) => css`\r\n    background: \r\n        linear-gradient(\r\n            ${color} ${theme.cellLineWidth}, \r\n            transparent ${theme.cellLineWidth},\r\n            transparent 100%\r\n         ),\r\n        linear-gradient(\r\n            90deg, \r\n            ${color} ${theme.cellLineWidth},\r\n            transparent ${theme.cellLineWidth},\r\n            transparent 100%\r\n        ) 1em 1em;\r\n    \r\n    background-size: 1em 1em;\r\n    \r\n    border-right: ${theme.cellLineWidth} solid ${color};\r\n    border-bottom: ${theme.cellLineWidth} solid ${color};\r\n`;\r\n\r\nexport const App = styled.div`\r\n  width: 100vw;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  //display: flex;\r\n  //justify-content: center;\r\n  //align-items: center;\r\n  position: relative;\r\n  padding: 1rem;\r\n  &:before {\r\n    content: '';\r\n    display: block;\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    top: 0;\r\n    background-image: url(\"${paper}\");\r\n    z-index: -1;\r\n    opacity: 0.4;\r\n  }\r\n`;\r\n\r\nexport const Grid = styled.div`\r\n  display: grid;\r\n  grid-gap: 1rem;\r\n  place-content: start center;\r\n  width: 100%;\r\n  height: 100%;\r\n  max-width: 900px;\r\n  \r\n  grid-template: \r\n        \"moveTimer  moveTimer     moveTimer\" 100px\r\n        \"MyBoard    MoveIndicator OpponentBoard\" 400px //TODO можно попробовать bootstrap embed \r\n      /  1fr        min-content           1fr;\r\n  \r\n  @media all and (max-width: 768px) {\r\n    grid-template: \r\n        \"MyBoard MyBoard\" 2fr\r\n        \"MoveIndicator  moveTimer\" min-content\r\n        \"OpponentBoard OpponentBoard\" 3fr\r\n      /  1fr 1fr;\r\n  }\r\n`;\r\n\r\nexport const MoveIndicator = styled.div`\r\n    grid-area: MoveIndicator;\r\n    place-self: center;\r\n    transition: all .3s;\r\n    transform-origin: center;\r\n    transform: ${({shooter}) => !shooter && 'rotate(180deg)'};\r\n    padding: 0 1rem;\r\n    \r\n    &:before {\r\n        content: '';\r\n        display: inline-block;\r\n        width: 0;\r\n        height: 0;\r\n        border-style: solid;\r\n        border-width: 50px 0 50px 50px;\r\n        border-color: transparent transparent transparent ${theme.inkColor};\r\n    } \r\n    @media all and (max-width: 768px) {\r\n        &:before {\r\n            transform: rotate(90deg);\r\n            border-width: 35px 0 35px 25px;\r\n        } \r\n    }\r\n`;\r\n\r\n\r\nconst boardGrid = css`\r\n  display: grid;\r\n  font-size: ${theme.boardFontSize};\r\n  grid-template: repeat(${theme.boardSize + 1}, 1em) / repeat(${theme.boardSize + 1}, 1em);\r\n`;\r\n\r\nexport const Board = styled(props => {\r\n    return (\r\n        <SquaredContainer {...props} innerClassName=\"inner\">\r\n            {props.children}\r\n        </SquaredContainer>\r\n    )\r\n})`\r\n  place-self: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  & > .inner {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n    ${cellBg()};\r\n    ${boardGrid}\r\n  }\r\n`;\r\n\r\nexport const MyBoard = styled(Board)`\r\n  grid-area: MyBoard;\r\n`;\r\n\r\nexport const OpponentBoard = styled(Board)`\r\n  grid-area: OpponentBoard;\r\n`;\r\n\r\n\r\n/************CELLS***********/\r\n\r\nconst cellHoverBase = css`\r\n    &:hover {\r\n        cursor: pointer;      \r\n    }\r\n`;\r\n\r\nexport const Cell = styled(({x, y, w, h, ...props}) => <div {...props}/>).attrs(({x, y, w, h}) => ({\r\n    style: {gridArea: `${y} / ${x} / ${y + h} / ${x + w}`}\r\n}))`\r\n  width: 100%;\r\n  height: 100%;\r\n  svg {\r\n    display: block;\r\n  }\r\n`;\r\n\r\n\r\nexport const AimCell = styled(props => {\r\n    return (\r\n        <Cell {...props}>\r\n            <AimIcon className=\"aim-cell__svg\"/>\r\n        </Cell>\r\n    )\r\n})`\r\n  ${cellHoverBase};\r\n  transition: all .1s;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  \r\n  .aim-cell__svg {\r\n    opacity: 0;\r\n    transition: all .2s;\r\n    width: 80%;\r\n    height: 80%;\r\n    display: block;\r\n    position: relative;\r\n    left: 1px;\r\n    top: 1px;\r\n    path{\r\n      fill: #35d494;\r\n    }\r\n  }\r\n  \r\n  &:hover .aim-cell__svg{\r\n    opacity: 1;\r\n    animation: heartbeat 1.5s ease-in-out infinite both;\r\n  }\r\n  \r\n  @keyframes heartbeat {\r\n      from {\r\n        transform: scale(1);\r\n        transform-origin: center center;\r\n        animation-timing-function: ease-out;\r\n      }\r\n      10% {\r\n        transform: scale(0.91);\r\n        animation-timing-function: ease-in;\r\n      }\r\n      17% {\r\n        transform: scale(0.98);\r\n        animation-timing-function: ease-out;\r\n      }\r\n      33% {\r\n        transform: scale(0.87);\r\n        animation-timing-function: ease-in;\r\n      }\r\n      45% {\r\n        transform: scale(1);\r\n        animation-timing-function: ease-out;\r\n      }\r\n    }\r\n`;\r\n\r\n\r\nexport const ShipCell = styled(props => {\r\n    return (\r\n        <Cell {...props}>\r\n            <HitIcon className=\"hit-cell__svg\"/>\r\n        </Cell>\r\n    )\r\n})`\r\n  .hit-cell__svg {\r\n    width: 100%;\r\n    height: 100%;\r\n    path {\r\n      fill: ${theme.inkColor}\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ShipPlacementCell = styled(ShipCell)`\r\n  ${cellHoverBase};\r\n  opacity: .15;\r\n  transition: all .2s;\r\n  &:hover {\r\n    opacity: .6;\r\n  }\r\n`;\r\n\r\n\r\nexport const ShotHitCell = styled(props => {\r\n    return (\r\n        <Cell {...props}>\r\n            <HitIcon className=\"hit-cell__svg\"/>\r\n        </Cell>\r\n    )\r\n})`\r\n  position: relative;\r\n  overflow: hidden;\r\n  &:after,\r\n  &:before {\r\n    content: '';\r\n    position: absolute;\r\n    top: -25%;\r\n    bottom: -25%;\r\n    left: 50%;\r\n    width: 2px;\r\n    background-color: #ff6464;\r\n  }\r\n  &:before {\r\n    transform: translateX(-50%) rotate(45deg);\r\n  }\r\n  &:after {\r\n    transform: translateX(-50%) rotate(-45deg);\r\n  }\r\n  .hit-cell__svg {\r\n    width: 100%;\r\n    height: 100%;\r\n    path {\r\n      fill: ${theme.inkColor}\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ShipDieCell = styled(ShotHitCell)`\r\n  opacity: 0.3;\r\n`;\r\n\r\nexport const ShotMissCell = styled(props => {\r\n    return (\r\n        <Cell {...props}>\r\n            <MissIcon className=\"miss-cell__svg\"/>\r\n        </Cell>\r\n    )\r\n})`\r\n  position: relative;\r\n  overflow: hidden;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  .miss-cell__svg {\r\n    display: block;\r\n    width: .4em;\r\n    height: .4em;\r\n    path {\r\n      fill: ${theme.inkColor}\r\n    }\r\n  }\r\n`;\r\n\r\nexport const LetterCell = styled(Cell)`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-family: 'Patrick Hand', cursive;\r\n  color: ${theme.inkColor};\r\n  user-select: none;\r\n  &:hover {\r\n    cursor: default;\r\n  }\r\n`;\r\n\r\n\r\n","export const gameStatuses = {\r\n    initialServer: 1,\r\n    waitingServer: 2,\r\n    waitingClient: 3,\r\n    shipPlacement: 4,\r\n    active: 5,\r\n    end: 6,\r\n    connectError: 7,\r\n};\r\n\r\nexport const gameSides = {\r\n    client: 'client',\r\n    server: 'server',\r\n};\r\n\r\nexport const onEvents = {\r\n    roomEntered: 'roomEntered',\r\n    roomReconnected: 'roomReconnected',\r\n    startShipsPlacement: 'startShipsPlacement',\r\n    startGame: 'startGame',\r\n    opponentShoot: 'opponentShoot',\r\n    chatMessage: 'chatMessage',\r\n    assignShooter: 'assignShooter',\r\n\r\n    //default\r\n    connectError: 'connect_error',\r\n    reconnect: 'reconnect'\r\n};\r\n\r\nexport const emitEvents = {\r\n    playerInit: 'playerInit',\r\n    knockToRoom: 'knockToRoom',\r\n    chatMessage: 'chatMessage',\r\n    reconnectToRoom: 'reconnectToRoom',\r\n    placementDone: 'placementDone',\r\n    shoot: 'shoot',\r\n    leaveRoom: 'leaveRoom'\r\n};\r\n\r\nexport const busEvents = {\r\n  placeShip: 'placeShip',\r\n  opponentShoot: 'opponentShoot',\r\n};","import * as C from './actionTypes';\r\nimport {eventsBus} from \"../utils/functions\";\r\nimport {busEvents} from \"../utils/constants\";\r\n\r\n\r\nexport const setNotPlacedShips = ships => ({\r\n    type: C.SET_NOT_DISTRIBUTED_SHIPS,\r\n    payload: {ships}\r\n});\r\n\r\nexport const addPlayerShip = ship => {\r\n    eventsBus.subscribe(busEvents.opponentShoot, ship.catchShoot);\r\n    return {\r\n        type: C.ADD_PLAYER_SHIP,\r\n        payload: {ship}\r\n    }\r\n};\r\n\r\nexport const updatePlayerShip = ship => ({\r\n    type: C.UPDATE_PLAYER_SHIP,\r\n    payload: {ship}\r\n});\r\n\r\nexport const setCurrent = ship => ({\r\n    type: C.SET_CURRENT,\r\n    payload: {ship}\r\n});\r\n\r\nexport const addShotToMap = shots => ({\r\n    type: C.ADD_SHOT_TO_MAP,\r\n    payload: {shots}\r\n});\r\n\r\nexport const addOpponentShotToMap = shot => ({\r\n    type: C.ADD_OPPONENT_SHOT_TO_MAP,\r\n    payload: {shot}\r\n});\r\n\r\nexport const assignShooter = iAmShooter => ({\r\n    type: C.ASSIGN_SHOOTER,\r\n    payload: {iAmShooter}\r\n});\r\n\r\nexport const setVolume = volume => ({\r\n    type: C.SET_VOLUME,\r\n    payload: {volume}\r\n});\r\n\r\nexport const toggleOpponentDisconnectedModal = isOpen => ({\r\n    type: C.TOGGLE_OPPONENT_DISCONNECTED_MODAL,\r\n    payload: {isOpen}\r\n});\r\n\r\nexport const setRoomDestroyDeadline = deadline => ({\r\n    type: C.SET_ROOM_DESTROY_DEADLINE,\r\n    payload: {deadline}\r\n});\r\n\r\n\r\n\r\nexport const setRoomSettings = settings => ({\r\n    type: C.SET_ROOM_SETTINGS,\r\n    payload: {settings}\r\n});\r\n\r\n\r\nexport const setGameStatus = status => ({\r\n    type: C.SET_GAME_STATUS,\r\n    payload: {status}\r\n});\r\n\r\n\r\nexport const resetState = () => ({\r\n    type: C.RESET_STATE\r\n});\r\n\r\nexport const updateOnlineRooms = roomsData => ({\r\n    type: C.UPDATE_ONLINE_ROOMS,\r\n    payload: {roomsData}\r\n});\r\n\r\nexport const setGameResult = stats => ({\r\n    type: C.SET_GAME_RESULT,\r\n    payload: {stats}\r\n});\r\n\r\n\r\n\r\n","\r\nexport const SET_ROOM_SETTINGS = 'SET_ROOM_SETTINGS';\r\nexport const SET_GAME_STATUS = 'SET_GAME_STATUS';\r\nexport const SET_NOT_DISTRIBUTED_SHIPS = 'SET_NOT_DISTRIBUTED_SHIPS';\r\nexport const ADD_PLAYER_SHIP = 'ADD_PLAYER_SHIP';\r\nexport const UPDATE_PLAYER_SHIP = 'UPDATE_PLAYER_SHIP';\r\nexport const SET_CURRENT = 'SET_CURRENT';\r\nexport const ADD_SHOT_TO_MAP = 'ADD_SHOT_TO_MAP';\r\nexport const ADD_OPPONENT_SHOT_TO_MAP = 'ADD_OPPONENT_SHOT_TO_MAP';\r\nexport const ASSIGN_SHOOTER = 'ASSIGN_SHOOTER';\r\nexport const RESET_STATE = 'RESET_STATE';\r\nexport const SET_VOLUME = 'SET_VOLUME';\r\nexport const TOGGLE_OPPONENT_DISCONNECTED_MODAL = 'TOGGLE_OPPONENT_DISCONNECTED_MODAL';\r\nexport const SET_ROOM_DESTROY_DEADLINE = 'SET_ROOM_DESTROY_DEADLINE';\r\nexport const UPDATE_ONLINE_ROOMS = 'UPDATE_ONLINE_ROOM';\r\nexport const SET_GAME_RESULT = 'SET_GAME_RESULT';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import uuid from \"uuid/v4\";\r\nimport {isNumeric} from \"./functions\";\r\nimport {updatePlayerShip} from \"../actions\";\r\n\r\nexport class BasicShip{\r\n    constructor(params, dispatch) {\r\n        this.id = uuid();\r\n        this.parts = {};\r\n        this.dispatch = dispatch || Function.prototype;\r\n        this.length = 1;\r\n\r\n        if (params) {\r\n            this.pos = params;\r\n        }\r\n    }\r\n\r\n    static types = {\r\n        ship: 'ship',\r\n        hit: 'hit',\r\n        kill: 'kill'\r\n    };\r\n\r\n    set pos({x, y, direction}){\r\n        if (isNumeric(x) && isNumeric(y) && direction !== undefined) {\r\n            const start = {x, y};\r\n            for (let i = 0; i < this.length; i++) {\r\n                const\r\n                    x = direction ? start.x : start.x + i,\r\n                    y = !direction ? start.y : start.y + i,\r\n                    id = `${this.id}_${i+1}`;\r\n\r\n                this.parts[`${x};${y}`] = { x, y, id, type: BasicShip.types.ship };\r\n            }\r\n        }\r\n    }\r\n\r\n    hasPart(x, y){\r\n        return this.parts.hasOwnProperty(`${x};${y}`);\r\n    }\r\n\r\n    isDie(){\r\n        for (let key in this.parts) {\r\n            if (this.parts[key].type !== BasicShip.types.hit) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    catchShoot = (x, y) => {\r\n\r\n        if (this.hasPart(x, y) && this.parts[`${x};${y}`].type === BasicShip.types.ship) {\r\n            this.parts[`${x};${y}`].type = BasicShip.types.hit;\r\n\r\n            if (this.isDie()) {\r\n                for (let key in this.parts) {\r\n                    this.parts[key].type = BasicShip.types.kill;\r\n                }\r\n            }\r\n\r\n            this.dispatch(updatePlayerShip(this)); //TODO: Move to callback\r\n            return this.parts[`${x};${y}`].type;\r\n        }\r\n    };\r\n\r\n    static recreate = (shipData, dispatch) => {\r\n        const ship = new BasicShip(null, dispatch);\r\n        ship.id = shipData.id;\r\n\r\n        for(let key in shipData.parts){\r\n            ship.parts[key] = {};\r\n            ship.parts[key].x = shipData.parts[key].x;\r\n            ship.parts[key].y = shipData.parts[key].y;\r\n            ship.parts[key].type = BasicShip.types[shipData.parts[key].type];\r\n        }\r\n\r\n        ship.length = Object.keys(shipData.parts).length;\r\n\r\n        return ship;\r\n    }\r\n}\r\n\r\nexport class SingleShip extends BasicShip{\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.length = 1;\r\n    }\r\n}\r\n\r\nexport class DoubleShip extends BasicShip{\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.length = 2;\r\n    }\r\n}\r\n\r\nexport class TripleShip extends BasicShip{\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.length = 3;\r\n    }\r\n}\r\n\r\nexport class QuadrupleShip extends BasicShip{\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.length = 4;\r\n    }\r\n}","import React from \"react\";\r\n\r\nimport * as Styled from \"../styled\";\r\nimport {BasicShip} from \"./ships\";\r\nimport config from '../config';\r\n\r\nexport function getDeepProp(object, path) {\r\n    const p = path.split('.');\r\n    return p.reduce((xs, x) => (xs && xs[x] !== undefined ? xs[x] : undefined), object);\r\n}\r\n\r\nexport function isNumeric(n) {\r\n    return !isNaN(parseFloat(n)) && isFinite(n);\r\n}\r\n\r\nexport const notEmpty = arr => {\r\n    return Array.isArray(arr) && arr.length;\r\n};\r\n\r\nexport const createReducer = (initialState, handlers) => (state = initialState, action) => {\r\n    if (!action || !action.type) {\r\n        return state;\r\n    }\r\n    const handler = handlers[action.type];\r\n    if (typeof handler === 'function') {\r\n        return handler(state, action.payload);\r\n    }\r\n    return state;\r\n};\r\n\r\nexport const between = (number, from, to) => {\r\n    return from < number && number < to;\r\n};\r\n\r\nfunction EventEmitter() {\r\n    this.callbacks = Object.create(null);\r\n\r\n    this.subscribe = function (eventName, callback) {\r\n        this.callbacks[eventName] = this.callbacks[eventName] || [];\r\n        this.callbacks[eventName].push(callback);\r\n        return () => {\r\n            this.callbacks[eventName] = this.callbacks[eventName].filter(cb => cb !== callback)\r\n        };\r\n    };\r\n\r\n    this.emit = function (eventName, args) {\r\n        const callbacks = this.callbacks[eventName];\r\n        if (callbacks && callbacks.length) {\r\n            return callbacks.map(cb => typeof cb === 'function' && cb.apply(null, args))\r\n        }\r\n    }\r\n}\r\n\r\nexport const eventsBus = new EventEmitter();\r\n\r\n/**\r\n * @param converter\r\n * @returns {function(*, *, *=): *}\r\n */\r\nconst getMapToGrid = converter => (items, getComponent, onClick) => {\r\n    onClick = onClick || Function.prototype;\r\n    return items.map((item, index) => {\r\n        const\r\n            {x: gridX, y: gridY} = typeof converter === 'function' ? converter(item.x, item.y) : item,\r\n            Component = getComponent(item);\r\n\r\n        return <Component\r\n            key={item.id || index}\r\n            x={gridX}\r\n            y={gridY}\r\n            w={1}\r\n            h={1}\r\n            onClick={() => onClick(item.x, item.y)}\r\n        >\r\n            {item.content}\r\n        </Component>\r\n    });\r\n};\r\n\r\n\r\n/**\r\n *\r\n * @param obj\r\n * @example\r\n * {\r\n *   'azaza': { 1;2': {x: 2, y: 1, type: 'hit'}, 2;2': {x: 2, y: 2, type: 'hit'},\r\n *   'ololo': { 1;2': {x: 2, y: 1, type: 'hit'}, 2;2': {x: 2, y: 2, type: 'hit'},\r\n * }\r\n * @returns {array}\r\n * @example [ {x: 1, y: 2, type: hit}, {x: 2, y: 2, type: hit} ]\r\n */\r\nexport const shotsMapAdapter = obj => {\r\n    return Object.values(obj).reduce((acc, el) => acc.concat(Object.values(el)), []);\r\n};\r\n\r\nexport const mapToGridShiftBy1 = getMapToGrid((x, y) => ({x: x + 1, y: y + 1}));\r\n\r\nexport const mapToGridShiftBy2 = getMapToGrid((x, y) => ({x: x + 2, y: y + 2}));\r\n\r\nexport const mapShipsToGrid = ships => {\r\n    const getComponent = shipPart => {\r\n        switch (shipPart.type) {\r\n            case BasicShip.types.kill:\r\n                return Styled.ShipDieCell;\r\n\r\n            case BasicShip.types.hit:\r\n                return Styled.ShotHitCell;\r\n\r\n            case BasicShip.types.ship:\r\n            default:\r\n                return Styled.ShipCell\r\n        }\r\n    };\r\n\r\n    return ships.map(ship => mapToGridShiftBy2(Object.values(ship.parts), getComponent))\r\n};\r\n\r\nexport const debounce = (fn, delay) => {\r\n    let timer = null;\r\n    return (...args) => {\r\n        clearTimeout(timer);\r\n        timer = setTimeout(() => {\r\n            fn.apply(this, args);\r\n        }, delay);\r\n    };\r\n};\r\n\r\n\r\nconst shipPlacementValidatorCreator = () => {\r\n    const\r\n        rules = [],\r\n        boardSize = config.boardSize;\r\n\r\n    const addRule = ruleCallback => {\r\n        rules.push(ruleCallback)\r\n    };\r\n\r\n    const validate = (coords, shipToPlace, field) => {\r\n        for (const rule of rules) {\r\n            if (!rule({coords, boardSize, field, shipToPlace})) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n\r\n    return {addRule, validate};\r\n};\r\n\r\nexport const shipPlacementValidator = shipPlacementValidatorCreator();\r\n\r\nshipPlacementValidator.addRule(({coords, field}) => {\r\n    return !field[`${coords.x};${coords.y}`]\r\n        && !field[`${coords.x + 1};${coords.y + 1}`]\r\n        && !field[`${coords.x + 1};${coords.y - 1}`]\r\n        && !field[`${coords.x - 1};${coords.y + 1}`]\r\n        && !field[`${coords.x - 1};${coords.y - 1}`]\r\n        && !field[`${coords.x - 1};${coords.y}`]\r\n        && !field[`${coords.x + 1};${coords.y}`]\r\n        && !field[`${coords.x};${coords.y - 1}`]\r\n        && !field[`${coords.x};${coords.y + 1}`];\r\n});\r\n\r\nshipPlacementValidator.addRule(({boardSize, shipToPlace, coords}) => {\r\n    if (shipToPlace.checkDirection()) {\r\n        return boardSize >= shipToPlace.length + coords.x\r\n    } else {\r\n        return boardSize >= shipToPlace.length + coords.y\r\n    }\r\n});\r\n\r\n","import axios from \"axios\";\r\nimport io from \"socket.io-client\";\r\n\r\nimport config from '../config';\r\nimport {emitEvents, gameStatuses} from \"./constants\";\r\nimport {getDeepProp} from \"./functions\";\r\nimport {parse} from \"query-string\";\r\n\r\nexport default class GameConnection {\r\n    constructor(apiUrl) {\r\n        this.apiUrl = apiUrl;\r\n        this.events = [];\r\n        this.restoreGame = Function.prototype;\r\n    }\r\n\r\n    _initSocketConnection() {\r\n        const socket = io(this.apiUrl);\r\n\r\n        return new Promise(resolve => {\r\n            socket.on('connect', () => {\r\n                this.socket = socket;\r\n                resolve(this.socket);\r\n            })\r\n        });\r\n    }\r\n\r\n    _subscribeSocketToEvents() {\r\n        if (!this.events.length) {\r\n            return Promise.resolve()\r\n        }\r\n\r\n        this.events.forEach(e => {\r\n            if (!e.eventName || !e.eventHandler) {\r\n                return;\r\n            }\r\n\r\n            this.socket.on(e.eventName, e.eventHandler)\r\n        });\r\n\r\n        return Promise.resolve();\r\n    }\r\n\r\n    _playerInit(playerID) {\r\n        return new Promise((resolve, reject) => {\r\n            this.socket.emit(emitEvents.playerInit, {playerID}, success => {\r\n                return success ? resolve(playerID) : reject(new Error('playerInit returns false'))\r\n            });\r\n        })\r\n    }\r\n\r\n    _knockToRoom(roomID, reconnectingPlayerID, password) {\r\n        return new Promise((resolve, reject) => {\r\n            this.socket.emit(emitEvents.knockToRoom, {roomID, password, reconnectingPlayerID}, result => {\r\n                if (getDeepProp(result, 'error')) {\r\n                    reject(new Error(result.error))\r\n                } else {\r\n                    resolve(result);\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    _restoreGameHistory = () => {\r\n        try {\r\n            return JSON.parse(localStorage.getItem(`game_save`));\r\n        } catch (e) {\r\n            console.error(e);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    createPlayer() {\r\n        return axios.get(`${this.apiUrl}/create-player`)\r\n            .then(({data}) => {\r\n                if (!data.error && getDeepProp(data, 'data.playerID')) {\r\n                    return data.data.playerID;\r\n                } else {\r\n                    throw new Error('create player request failed')\r\n                }\r\n            })\r\n            .catch(e => console.error(e));\r\n    }\r\n\r\n    initConnection() {\r\n        const\r\n            {roomID} = parse(window.location.search),\r\n            restored = this._restoreGameHistory();\r\n        let playerIDsave;\r\n\r\n        return this._initSocketConnection()\r\n            .then(() => this._subscribeSocketToEvents())\r\n            .then(() => this.createPlayer())\r\n            .then(playerID => this._playerInit(playerID))\r\n            .then(playerID => {\r\n                playerIDsave = playerID;\r\n                if (restored) {\r\n                    return this.connectToRoom({\r\n                        playerID,\r\n                        roomID: restored.roomID,\r\n                        reconnectingPlayerID: restored.playerID,\r\n                    });\r\n                } else if (roomID) {\r\n                    return this.connectToRoom({\r\n                        roomID,\r\n                        playerID,\r\n                    })\r\n                } else {\r\n                    return Promise.resolve({\r\n                        playerID,\r\n                        gameStatus: gameStatuses.initialServer,\r\n                    });\r\n                }\r\n            })\r\n            .catch(e => {\r\n                console.error(e);\r\n                return Promise.reject({\r\n                    playerID: playerIDsave,\r\n                });\r\n            })\r\n    }\r\n\r\n    createRoom(settings, playerID) {\r\n        return axios.post(`${this.apiUrl}/create-room`, {playerID, settings})\r\n            .then(responce => responce.data)\r\n            .then(({error, data}) => {\r\n                if (error || !data.roomID) {\r\n                    return Promise.reject(new Error('Create room failed'))\r\n                } else {\r\n                    return Promise.resolve(data.roomID);\r\n                }\r\n            })\r\n            .catch(e => Promise.reject(e))\r\n    }\r\n\r\n    connectToRoom = ({roomID, playerID, reconnectingPlayerID, ...rest}) => {\r\n        return this._knockToRoom(roomID, reconnectingPlayerID, rest.password)\r\n            .then(result => {\r\n                result = {...result, ...rest};\r\n                if (getDeepProp(result, 'reconnect')) {\r\n                    this.restoreGame(result);\r\n                }\r\n                return result;\r\n            })\r\n    };\r\n\r\n    emitPlacementDone(playerShipsData) {\r\n        return new Promise((resolve, reject) => {\r\n            this.socket.emit(emitEvents.placementDone, playerShipsData, success => {\r\n                success ? resolve() : reject(new Error('emitPlacementDone failure'))\r\n            });\r\n        })\r\n            .catch(e => {\r\n                console.error(e);\r\n            })\r\n\r\n    }\r\n\r\n    emitShot([x, y], resolve) {\r\n        this.socket.emit(emitEvents.shoot, [x, y], resolve);\r\n    }\r\n\r\n    emitLeaveRoom() {\r\n        return new Promise(resolve => {\r\n            if (this.socket.connected) {\r\n                this.socket.emit(emitEvents.leaveRoom, () => resolve(true))\r\n            } else {\r\n                resolve();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport const gameConnection = new GameConnection(config.apiUrl);","class SoundsQueue{\r\n    constructor() {\r\n        this.queue = [];\r\n        this.currentlyPlayed = null;\r\n        this.volume = 0.5;\r\n    }\r\n\r\n    _clearAudioQueue() {\r\n        this.queue.length = 0;\r\n    }\r\n\r\n    _playSound = (audio, callback) => {\r\n        audio.volume = this.volume;\r\n        audio.play()\r\n            .catch(e => {\r\n                this._clearAudioQueue();\r\n            });\r\n        if (callback) {\r\n            audio.onended = callback;\r\n        }\r\n    };\r\n\r\n    _playSoundQueue = () => {\r\n        const recursive_play = () => {\r\n            if (this.queue.length) {\r\n                this.currentlyPlayed = this.queue.pop();\r\n                this._playSound(this.currentlyPlayed, () => recursive_play());\r\n            } else {\r\n                this.currentlyPlayed = null;\r\n            }\r\n        };\r\n\r\n        if (!this.currentlyPlayed) {\r\n            recursive_play();\r\n        }\r\n    };\r\n\r\n    _addToQueue = sound => {\r\n        this.queue.unshift(sound);\r\n    };\r\n\r\n    play(sound){\r\n        if (!sound) {\r\n            return;\r\n        }\r\n        this._addToQueue(sound);\r\n        this._playSoundQueue();\r\n    }\r\n}\r\n\r\nexport const soundsQueue = new SoundsQueue();","import miss2 from './miss2.mp3';\r\nimport miss3 from './miss3.mp3';\r\nimport hit1 from './shipHit.wav';\r\n\r\nclass SoundsBank {\r\n    constructor() {\r\n        this.sounds = {};\r\n    }\r\n\r\n    addSound = (type, sound) => {\r\n        if (!this.sounds[type]) {\r\n            this.sounds[type] = [];\r\n        }\r\n\r\n        this.sounds[type].push(new Audio(sound));\r\n        return this;\r\n    };\r\n\r\n    getRandomWithType = type => {\r\n        const soundsWithType = this.sounds[type];\r\n        if (!soundsWithType) {\r\n            return;\r\n        }\r\n\r\n        const randomIndex = Math.floor(Math.random() * soundsWithType.length);\r\n\r\n        return soundsWithType[randomIndex];\r\n    };\r\n\r\n    getIndexWithType = (type, i) => {\r\n        if (!this.sounds[type]) {\r\n            return;\r\n        }\r\n        return this.sounds[type][i];\r\n    }\r\n}\r\n\r\nconst soundsBank = new SoundsBank();\r\n\r\nsoundsBank\r\n    .addSound('miss', miss2)\r\n    .addSound('miss', miss3)\r\n    .addSound('hit', hit1);\r\n\r\nexport default soundsBank;\r\n\r\n\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\nimport styled from \"styled-components\";\r\n\r\n\r\nclass Timer extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            deadline: moment.duration(this.props.deadline)\r\n        };\r\n\r\n        this.intervalID = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.init();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.intervalID);\r\n    }\r\n\r\n\r\n    init(){\r\n        this.intervalID = setInterval(() => {\r\n            const newDuration = this.state.deadline.clone();\r\n\r\n            if (this.state.deadline.seconds() > 0) {\r\n                newDuration.subtract(1, 's');\r\n            } else {\r\n                clearInterval(this.intervalID);\r\n                return;\r\n            }\r\n            this.setState({deadline: newDuration});\r\n        }, 1000);\r\n    }\r\n\r\n    render() {\r\n        const {deadline} = this.state;\r\n        return (\r\n            <div className={this.props.className}>\r\n                {deadline.minutes()}\r\n                :\r\n                {deadline.seconds()}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport const StyledTimer = styled(Timer)`\r\n  grid-area: moveTimer;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 36px;\r\n  font-weight: 300;\r\n    @media all and (max-width: 768px) {\r\n        font-size: 26px; \r\n    }\r\n`;\r\n\r\nStyledTimer.propTypes = {\r\n    deadline: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default StyledTimer;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M454.2,189.101l-33.6-5.7c-3.5-11.3-8-22.2-13.5-32.6l19.8-27.7c8.4-11.8,7.1-27.9-3.2-38.1l-29.8-29.8 c-5.6-5.6-13-8.7-20.9-8.7c-6.2,0-12.1,1.9-17.1,5.5l-27.8,19.8c-10.8-5.7-22.1-10.4-33.8-13.9l-5.6-33.2 c-2.4-14.3-14.7-24.7-29.2-24.7h-42.1c-14.5,0-26.8,10.4-29.2,24.7l-5.8,34c-11.2,3.5-22.1,8.1-32.5,13.7l-27.5-19.8 c-5-3.6-11-5.5-17.2-5.5c-7.9,0-15.4,3.1-20.9,8.7l-29.9,29.8c-10.2,10.2-11.6,26.3-3.2,38.1l20,28.1 c-5.5,10.5-9.9,21.4-13.3,32.7l-33.2,5.6c-14.3,2.4-24.7,14.7-24.7,29.2v42.1c0,14.5,10.4,26.8,24.7,29.2l34,5.8 c3.5,11.2,8.1,22.1,13.7,32.5l-19.7,27.4c-8.4,11.8-7.1,27.9,3.2,38.1l29.8,29.8c5.6,5.6,13,8.7,20.9,8.7c6.2,0,12.1-1.9,17.1-5.5 l28.1-20c10.1,5.3,20.7,9.6,31.6,13l5.6,33.6c2.4,14.3,14.7,24.7,29.2,24.7h42.2c14.5,0,26.8-10.4,29.2-24.7l5.7-33.6 c11.3-3.5,22.2-8,32.6-13.5l27.7,19.8c5,3.6,11,5.5,17.2,5.5l0,0c7.9,0,15.3-3.1,20.9-8.7l29.8-29.8c10.2-10.2,11.6-26.3,3.2-38.1 l-19.8-27.8c5.5-10.5,10.1-21.4,13.5-32.6l33.6-5.6c14.3-2.4,24.7-14.7,24.7-29.2v-42.1 C478.9,203.801,468.5,191.501,454.2,189.101z M451.9,260.401c0,1.3-0.9,2.4-2.2,2.6l-42,7c-5.3,0.9-9.5,4.8-10.8,9.9 c-3.8,14.7-9.6,28.8-17.4,41.9c-2.7,4.6-2.5,10.3,0.6,14.7l24.7,34.8c0.7,1,0.6,2.5-0.3,3.4l-29.8,29.8c-0.7,0.7-1.4,0.8-1.9,0.8 c-0.6,0-1.1-0.2-1.5-0.5l-34.7-24.7c-4.3-3.1-10.1-3.3-14.7-0.6c-13.1,7.8-27.2,13.6-41.9,17.4c-5.2,1.3-9.1,5.6-9.9,10.8l-7.1,42 c-0.2,1.3-1.3,2.2-2.6,2.2h-42.1c-1.3,0-2.4-0.9-2.6-2.2l-7-42c-0.9-5.3-4.8-9.5-9.9-10.8c-14.3-3.7-28.1-9.4-41-16.8 c-2.1-1.2-4.5-1.8-6.8-1.8c-2.7,0-5.5,0.8-7.8,2.5l-35,24.9c-0.5,0.3-1,0.5-1.5,0.5c-0.4,0-1.2-0.1-1.9-0.8l-29.8-29.8 c-0.9-0.9-1-2.3-0.3-3.4l24.6-34.5c3.1-4.4,3.3-10.2,0.6-14.8c-7.8-13-13.8-27.1-17.6-41.8c-1.4-5.1-5.6-9-10.8-9.9l-42.3-7.2 c-1.3-0.2-2.2-1.3-2.2-2.6v-42.1c0-1.3,0.9-2.4,2.2-2.6l41.7-7c5.3-0.9,9.6-4.8,10.9-10c3.7-14.7,9.4-28.9,17.1-42 c2.7-4.6,2.4-10.3-0.7-14.6l-24.9-35c-0.7-1-0.6-2.5,0.3-3.4l29.8-29.8c0.7-0.7,1.4-0.8,1.9-0.8c0.6,0,1.1,0.2,1.5,0.5l34.5,24.6 c4.4,3.1,10.2,3.3,14.8,0.6c13-7.8,27.1-13.8,41.8-17.6c5.1-1.4,9-5.6,9.9-10.8l7.2-42.3c0.2-1.3,1.3-2.2,2.6-2.2h42.1 c1.3,0,2.4,0.9,2.6,2.2l7,41.7c0.9,5.3,4.8,9.6,10,10.9c15.1,3.8,29.5,9.7,42.9,17.6c4.6,2.7,10.3,2.5,14.7-0.6l34.5-24.8 c0.5-0.3,1-0.5,1.5-0.5c0.4,0,1.2,0.1,1.9,0.8l29.8,29.8c0.9,0.9,1,2.3,0.3,3.4l-24.7,34.7c-3.1,4.3-3.3,10.1-0.6,14.7 c7.8,13.1,13.6,27.2,17.4,41.9c1.3,5.2,5.6,9.1,10.8,9.9l42,7.1c1.3,0.2,2.2,1.3,2.2,2.6v42.1H451.9z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M239.4,136.001c-57,0-103.3,46.3-103.3,103.3s46.3,103.3,103.3,103.3s103.3-46.3,103.3-103.3S296.4,136.001,239.4,136.001 z M239.4,315.601c-42.1,0-76.3-34.2-76.3-76.3s34.2-76.3,76.3-76.3s76.3,34.2,76.3,76.3S281.5,315.601,239.4,315.601z\"\n});\n\nvar SvgSettings = function SvgSettings(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 478.703 478.703\",\n    style: {\n      enableBackground: \"new 0 0 478.703 478.703\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSettings, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/settings.8f81017c.svg\";\nexport { ForwardRef as ReactComponent };","import React, {Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport styled from 'styled-components/macro';\r\nimport {ReactComponent as SettingsIcon} from '../img/settings.svg';\r\nimport {debounce} from \"../utils/functions\";\r\n\r\nconst Outer = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  top: 0;\r\n  transition: all .3s;\r\n  background-color: ${({opened}) => opened ? 'rgba(0, 0, 0, .7)' : 'transparent'};\r\n  z-index: 1000;\r\n`;\r\n\r\n\r\nconst Opener = styled.button`\r\n  position: fixed;\r\n  top: 10px;\r\n  right: 10px;\r\n  border: none;\r\n  background-color: transparent;\r\n  padding: 5px;\r\n  z-index: 1001;\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n  \r\n  svg {\r\n    width: 30px;\r\n    height: 30px;\r\n    display: block;\r\n    path {\r\n      transition: all .7s;\r\n      fill: ${({opened}) => opened ? '#b6bcff' : '#4467ff'}\r\n    }\r\n  }\r\n`;\r\n\r\nclass TopDrawer extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            opened: false,\r\n            shown: false\r\n        };\r\n\r\n\r\n        this.outerRef = React.createRef();\r\n        this.innerRef = React.createRef();\r\n\r\n        this.Inner = styled(this.props.Inner)`\r\n          position: absolute;\r\n          left: 50%;\r\n          top: 0;\r\n          transition: all .3s;\r\n        `;\r\n    }\r\n\r\n    static get transforms(){\r\n        return {\r\n            closed: 'translateX(-50%) translateY(-100%)',\r\n            opened: 'translateX(-50%) translateY(0)',\r\n        }\r\n    }\r\n\r\n\r\n    toggleOpen = open => {\r\n        this.setState({\r\n            opened: open !== undefined ? open : !this.state.opened,\r\n            shown: open === true || !this.state.opened === true || this.state.shown\r\n        }, () => this.transition(this.state.opened));\r\n    };\r\n\r\n    transition = (opened) => {\r\n        const\r\n            {current: outer} = this.outerRef,\r\n            {current: inner} = this.innerRef;\r\n\r\n        if (opened) {\r\n            outer.style.opacity = 0;\r\n            outer.style.display = 'block';\r\n            inner.style.transform = TopDrawer.transforms.closed;\r\n            requestAnimationFrame(() => requestAnimationFrame(() => {\r\n                outer.style.opacity = 1;\r\n                inner.style.transform = TopDrawer.transforms.opened;\r\n            }))\r\n        } else {\r\n            inner.style.transform = TopDrawer.transforms.closed;\r\n        }\r\n    };\r\n\r\n    toggleShown = () => {\r\n        if (!this.state.opened) {\r\n            this.setState({shown: false});\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const\r\n            {opened, shown} = this.state,\r\n            {Inner} = this;\r\n\r\n        return ReactDOM.createPortal(\r\n            <>\r\n                {\r\n                    shown &&\r\n                    <Outer opened={opened} ref={this.outerRef} onClick={() => this.toggleOpen(false)}>\r\n                        <Inner\r\n                            ref={this.innerRef}\r\n                            opened={opened}\r\n                            onTransitionEnd={debounce(() => this.toggleShown(), 100)}\r\n                            onClick={e => e.stopPropagation()}\r\n                        >\r\n                            {this.props.children}\r\n                        </Inner>\r\n                    </Outer>\r\n                }\r\n\r\n                <Opener opened={opened} onClick={() => this.toggleOpen()}>\r\n                    <SettingsIcon/>\r\n                </Opener>\r\n            </>,\r\n            document.querySelector('#root')\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default TopDrawer;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M28.404,3.413c-0.976-0.552-2.131-0.534-3.09,0.044c-0.046,0.027-0.09,0.059-0.13,0.093L11.634,15.013H1 c-0.553,0-1,0.447-1,1v19c0,0.266,0.105,0.52,0.293,0.707S0.734,36.013,1,36.013l10.61-0.005l13.543,12.44 c0.05,0.046,0.104,0.086,0.161,0.12c0.492,0.297,1.037,0.446,1.582,0.446c0.517-0.001,1.033-0.134,1.508-0.402 C29.403,48.048,30,47.018,30,45.857V6.169C30,5.008,29.403,3.978,28.404,3.413z M28,45.857c0,0.431-0.217,0.81-0.579,1.015 c-0.155,0.087-0.548,0.255-1,0.026L13,34.569v-4.556c0-0.553-0.447-1-1-1s-1,0.447-1,1v3.996l-9,0.004v-17h9v4c0,0.553,0.447,1,1,1 s1-0.447,1-1v-4.536l13.405-11.34c0.461-0.242,0.86-0.07,1.016,0.018C27.783,5.36,28,5.739,28,6.169V45.857z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M38.797,7.066c-0.523-0.177-1.091,0.103-1.269,0.626c-0.177,0.522,0.103,1.091,0.626,1.269 c7.101,2.411,11.872,9.063,11.872,16.553c0,7.483-4.762,14.136-11.849,16.554c-0.522,0.178-0.802,0.746-0.623,1.27 c0.142,0.415,0.53,0.677,0.946,0.677c0.107,0,0.216-0.017,0.323-0.054c7.896-2.693,13.202-10.106,13.202-18.446 C52.026,17.166,46.71,9.753,38.797,7.066z\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M43.026,25.513c0-5.972-4.009-11.302-9.749-12.962c-0.533-0.151-1.084,0.152-1.238,0.684 c-0.153,0.53,0.152,1.085,0.684,1.238c4.889,1.413,8.304,5.953,8.304,11.04s-3.415,9.627-8.304,11.04 c-0.531,0.153-0.837,0.708-0.684,1.238c0.127,0.438,0.526,0.723,0.961,0.723c0.092,0,0.185-0.013,0.277-0.039 C39.018,36.815,43.026,31.485,43.026,25.513z\"\n});\n\nvar SvgVolumeOn = function SvgVolumeOn(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 52.026 52.026\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgVolumeOn, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/volume-on.defe39ee.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M46.414,26l7.293-7.293c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0L45,24.586l-7.293-7.293 c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414L43.586,26l-7.293,7.293c-0.391,0.391-0.391,1.023,0,1.414 C36.488,34.902,36.744,35,37,35s0.512-0.098,0.707-0.293L45,27.414l7.293,7.293C52.488,34.902,52.744,35,53,35 s0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414L46.414,26z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M28.404,4.4c-0.975-0.552-2.131-0.534-3.09,0.044c-0.046,0.027-0.09,0.059-0.13,0.093L11.634,16H1c-0.553,0-1,0.447-1,1v19 c0,0.266,0.105,0.52,0.293,0.707S0.734,37,1,37l10.61-0.005l13.543,12.44c0.05,0.046,0.104,0.086,0.161,0.12 c0.492,0.297,1.037,0.446,1.582,0.446c0.517-0.001,1.033-0.134,1.508-0.402C29.403,49.035,30,48.005,30,46.844V7.156 C30,5.995,29.403,4.965,28.404,4.4z M28,46.844c0,0.431-0.217,0.81-0.579,1.015c-0.155,0.087-0.548,0.255-1,0.026L13,35.556V31 c0-0.553-0.447-1-1-1s-1,0.447-1,1v3.996L2,35V18h9v4c0,0.553,0.447,1,1,1s1-0.447,1-1v-4.536l13.405-11.34 c0.46-0.242,0.86-0.07,1.016,0.018C27.783,6.347,28,6.725,28,7.156V46.844z\"\n});\n\nvar SvgVolumeOff = function SvgVolumeOff(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 54 54\",\n    style: {\n      enableBackground: \"new 0 0 54 54\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgVolumeOff, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/volume-off.a8c60cda.svg\";\nexport { ForwardRef as ReactComponent };","import React, {useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from \"styled-components/macro\";\r\nimport {ReactComponent as VolumeOnIcon} from \"../../img/volume-on.svg\";\r\nimport {ReactComponent as VolumeOffIcon} from \"../../img/volume-off.svg\";\r\nimport {debounce} from \"../../utils/functions\";\r\n\r\nconst VolumeButton = styled(({volume, ...props}) => {\r\n    return (\r\n        <div {...props}>\r\n            {\r\n                volume ? <VolumeOnIcon/> : <VolumeOffIcon/>\r\n            }\r\n        </div>\r\n    )\r\n})`\r\n  width: 35px;\r\n  height: 35px;\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n  svg {\r\n    width: 100%;\r\n    height: 100%;\r\n    path {\r\n      fill: ${({volume}) => volume ? '#8187ff' : '#ff7172'}\r\n    }\r\n  }\r\n`;\r\n\r\n\r\n\r\nconst VolumeSetting = props => {\r\n    const\r\n        [inputVolume, setInputVolume] = useState(0.5),\r\n        [volumeMemo, setVolumeMemo] = useState(null);\r\n\r\n\r\n    const volumeChangeHandler = debounce(value => {\r\n        props.update(value / 100);\r\n    }, 100);\r\n\r\n\r\n    const volumeButtonClickHandler = () => {\r\n        if (inputVolume) {\r\n            setInputVolume(0);\r\n            setVolumeMemo(inputVolume);\r\n            props.update(0);\r\n        } else {\r\n            setInputVolume(volumeMemo);\r\n            props.update(volumeMemo);\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <VolumeButton\r\n                volume={props.volume}\r\n                onClick={volumeButtonClickHandler}\r\n            />\r\n            <input\r\n                type=\"range\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                onChange={e => {\r\n                    e.persist();\r\n                    setInputVolume(e.target.value / 100);\r\n                    volumeChangeHandler(e.target.value);\r\n                }}\r\n                value={inputVolume * 100}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nVolumeSetting.propTypes = {\r\n    volume: PropTypes.number.isRequired,\r\n    update: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default VolumeSetting;","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from \"react-redux\";\r\nimport styled from 'styled-components/macro';\r\n\r\nimport TopDrawer from '../TopDrawer';\r\nimport {setVolume} from \"../../actions\";\r\nimport paper from \"../../img/paper.jpg\";\r\nimport VolumeSetting from './VolumeSetting';\r\n\r\nconst DrawerInner = styled.div`\r\n  padding: 1rem;\r\n  background-image: url(\"${paper}\");\r\n  background-size: 100%;\r\n  border-radius: 0 0 5px 5px;\r\n  display: grid;\r\n  grid-template-columns: min-content auto;\r\n  align-items: center;\r\n  grid-gap: 1rem;\r\n`;\r\n\r\nclass SettingsPanel extends Component {\r\n    render() {\r\n        return (\r\n            <TopDrawer Inner={DrawerInner}>\r\n                <VolumeSetting\r\n                    volume={this.props.volume}\r\n                    update={volume => this.props.dispatch(setVolume(volume))}\r\n                />\r\n            </TopDrawer>\r\n        );\r\n    }\r\n}\r\n\r\nSettingsPanel.propTypes = {\r\n    dispatch: PropTypes.func.isRequired,\r\n    volume: PropTypes.number.isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    volume: state.volume\r\n});\r\n\r\nexport default connect(mapStateToProps)(SettingsPanel);","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\n\r\nconst withCountdownTimer = WrappedComponent => {\r\n    class CountdownTimer extends Component {\r\n        constructor(props) {\r\n            super(props);\r\n\r\n            this.state = {\r\n                deadline: moment.duration(this.props.deadline)\r\n            };\r\n\r\n            this.intervalID = null;\r\n        }\r\n\r\n        componentDidMount() {\r\n            this.init();\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            clearInterval(this.intervalID);\r\n        }\r\n\r\n        init(){\r\n            this.intervalID = setInterval(() => {\r\n                const newDuration = this.state.deadline.clone();\r\n\r\n                if (this.state.deadline.seconds() > 0) {\r\n                    newDuration.subtract(1, 's');\r\n                } else {\r\n                    clearInterval(this.intervalID);\r\n                    return;\r\n                }\r\n                this.setState({deadline: newDuration});\r\n            }, 1000);\r\n        }\r\n\r\n        toObject = duration => {\r\n            return {\r\n                seconds: duration.seconds(),\r\n                minutes: duration.minutes(),\r\n                hours: duration.hours(),\r\n            }\r\n        };\r\n\r\n        render() {\r\n            return <WrappedComponent {...this.props} timer={this.toObject(this.state.deadline)}/>\r\n        }\r\n    }\r\n\r\n    CountdownTimer.propTypes = {\r\n        deadline: PropTypes.number.isRequired,\r\n    };\r\n\r\n    return CountdownTimer;\r\n};\r\n\r\nexport default withCountdownTimer;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Modal from 'react-modal';\r\nimport styled from 'styled-components/macro';\r\nimport {connect} from \"react-redux\";\r\n\r\nimport paper from '../img/paper.jpg';\r\nimport withCountdownTimer from './withCountdownTimer';\r\n\r\n\r\nconst customStyles = {\r\n    overlay: {\r\n        position: \"fixed\",\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: \"rgba(0, 0, 0, 0.65)\",\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    },\r\n    content: {\r\n        position: \"static\",\r\n        border: 'none',\r\n        backgroundImage: `url(\"${paper}\")`,\r\n        backgroundSize: '100%',\r\n        overflow: \"hidden\",\r\n        borderRadius: \"4px\",\r\n        padding: \"20px\"\r\n    }\r\n};\r\nModal.setAppElement('#root');\r\n\r\nconst StyledTimer = styled(({timer, ...props}) => {\r\n    return (\r\n        <div {...props}>\r\n            <span>{timer.minutes}</span>\r\n            :\r\n            <span>{timer.seconds}</span>\r\n        </div>\r\n    )\r\n})`\r\n  display: inline-block;\r\n  font-weight: normal;\r\n`;\r\n\r\nconst Timer = withCountdownTimer(StyledTimer);\r\n\r\nconst OpponentDisconnectedModal = props => {\r\n    return (\r\n        <Modal\r\n            isOpen={props.opponentDisconnectedModalOpen}\r\n            style={customStyles}\r\n        >\r\n            <h2>Opponent is disconnected</h2>\r\n            <h3>Room will be removed after:\r\n                {\r\n                    props.roomDestroyDeadline && <Timer deadline={props.roomDestroyDeadline}/>\r\n                }\r\n            </h3>\r\n            <button onClick={props.onConfirmLeaveRoom}>Leave room</button>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nOpponentDisconnectedModal.propTypes = {\r\n    onConfirmLeaveRoom: PropTypes.func.isRequired,\r\n    opponentDisconnectedModalOpen: PropTypes.bool.isRequired,\r\n    roomDestroyDeadline: PropTypes.number,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    opponentDisconnectedModalOpen: state.opponentDisconnectedModalOpen,\r\n    roomDestroyDeadline: state.roomDestroyDeadline\r\n});\r\n\r\nexport default connect(mapStateToProps)(OpponentDisconnectedModal);","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {getDeepProp} from \"../utils/functions\";\r\nimport {gameConnection} from \"../utils/gameConnection\";\r\n\r\nclass RoomCreator extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: 'Default',\r\n            password: '',\r\n            privateRoom: false\r\n        }\r\n    }\r\n\r\n    handleSubmit = event => {\r\n        event.preventDefault();\r\n        gameConnection.createRoom(this.state, this.props.playerID)\r\n    };\r\n\r\n    handleInputChange = event => {\r\n        if (event.target.type === 'checkbox') {\r\n            this.setState({\r\n                [event.target.name]: event.target.checked\r\n            })\r\n        } else if (event.target.type === 'number') {\r\n            this.setState({\r\n                [event.target.name]: Number(event.target.value)\r\n            })\r\n        } else {\r\n            this.setState({\r\n                [event.target.name]: event.target.value\r\n            })\r\n        }\r\n    };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={this.handleSubmit}>\r\n\r\n                <div className=\"form-group\">\r\n                    <input\r\n                        name=\"name\"\r\n                        type=\"text\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"Room name\"\r\n                        onChange={this.handleInputChange}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"form-group form-check\">\r\n                    <input\r\n                        name=\"privateRoom\"\r\n                        type=\"checkbox\"\r\n                        className=\"form-check-input\"\r\n                        id=\"isPrivateRoom\"\r\n                        checked={this.state.privateRoom}\r\n                        onChange={this.handleInputChange}\r\n                    />\r\n                    <label className=\"form-check-label\" htmlFor=\"isPrivateRoom\">Private room</label>\r\n                </div>\r\n\r\n                {\r\n                    this.state.privateRoom &&\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            name=\"password\"\r\n                            type=\"password\"\r\n                            className=\"form-control\"\r\n                            placeholder=\"Password\"\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                    </div>\r\n                }\r\n\r\n                <button type=\"submit\" className=\"btn btn-primary\">Create</button>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nRoomCreator.propTypes = {\r\n    playerID: PropTypes.string.isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    playerID: getDeepProp(state, 'settings.playerID'),\r\n});\r\n\r\nexport default connect(mapStateToProps)(RoomCreator);\r\n\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M357.45,190.721c-5.331-5.33-11.8-7.993-19.417-7.993h-9.131v-54.821c0-35.022-12.559-65.093-37.685-90.218 C266.093,12.563,236.025,0,200.998,0c-35.026,0-65.1,12.563-90.222,37.688C85.65,62.814,73.091,92.884,73.091,127.907v54.821 h-9.135c-7.611,0-14.084,2.663-19.414,7.993c-5.33,5.326-7.994,11.799-7.994,19.417V374.59c0,7.611,2.665,14.086,7.994,19.417 c5.33,5.325,11.803,7.991,19.414,7.991H338.04c7.617,0,14.085-2.663,19.417-7.991c5.325-5.331,7.994-11.806,7.994-19.417V210.135 C365.455,202.523,362.782,196.051,357.45,190.721z M274.087,182.728H127.909v-54.821c0-20.175,7.139-37.402,21.414-51.675 c14.277-14.275,31.501-21.411,51.678-21.411c20.179,0,37.399,7.135,51.677,21.411c14.271,14.272,21.409,31.5,21.409,51.675V182.728 z\"\n});\n\nvar SvgLocked = function SvgLocked(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 401.998 401.998\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgLocked, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/locked.8a6d2ca0.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M375.721,227.259c-5.331-5.331-11.8-7.992-19.417-7.992H146.176v-91.36c0-20.179,7.139-37.402,21.415-51.678 c14.277-14.273,31.501-21.411,51.678-21.411c20.175,0,37.402,7.137,51.673,21.411c14.277,14.276,21.416,31.5,21.416,51.678 c0,4.947,1.807,9.229,5.42,12.845c3.621,3.617,7.905,5.426,12.847,5.426h18.281c4.945,0,9.227-1.809,12.848-5.426 c3.606-3.616,5.42-7.898,5.42-12.845c0-35.216-12.515-65.331-37.541-90.362C284.603,12.513,254.48,0,219.269,0 c-35.214,0-65.334,12.513-90.366,37.544c-25.028,25.028-37.542,55.146-37.542,90.362v91.36h-9.135 c-7.611,0-14.084,2.667-19.414,7.992c-5.33,5.325-7.994,11.8-7.994,19.414v164.452c0,7.617,2.665,14.089,7.994,19.417 c5.33,5.325,11.803,7.991,19.414,7.991h274.078c7.617,0,14.092-2.666,19.417-7.991c5.325-5.328,7.994-11.8,7.994-19.417V246.673 C383.719,239.059,381.053,232.591,375.721,227.259z\"\n});\n\nvar SvgUnlocked = function SvgUnlocked(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 438.533 438.533\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgUnlocked, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/unlocked.81741f18.svg\";\nexport { ForwardRef as ReactComponent };","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from \"react-redux\";\r\nimport styled from 'styled-components/macro';\r\nimport {getDeepProp} from \"../utils/functions\";\r\nimport {gameConnection} from \"../utils/gameConnection\";\r\nimport {gameStatuses} from \"../utils/constants\";\r\nimport {resetState, setGameStatus, setRoomSettings} from \"../actions\";\r\nimport {ReactComponent as LockedIcon} from '../img/locked.svg';\r\nimport {ReactComponent as UnlockedIcon} from '../img/unlocked.svg';\r\n\r\nconst RoomsTable = styled.table`\r\n  width: 100%;\r\n  text-align: center;\r\n`;\r\n\r\nconst VerticalAligned = styled.span`\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n`;\r\n\r\nconst StyledPrivateIcon = styled(({isPrivate, ...props}) => {\r\n    const Component = isPrivate ? LockedIcon : UnlockedIcon;\r\n    return <Component {...props}/>\r\n})`\r\n  width: 15px;\r\n  height: 15px;\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  margin-right: .5rem;\r\n \r\n  path {\r\n    fill: ${({isPrivate}) => isPrivate ? '#da3545' : '#28a645'};\r\n  }\r\n`;\r\n\r\nconst Col = styled(({width, ...props}) => <th {...props}/>)`\r\n  width: ${({width}) => width};\r\n`;\r\n\r\nclass OnlineRooms extends Component {\r\n    knockToRoomHandler = (connectionData, isProtected) => {\r\n        if (isProtected) {\r\n            connectionData.password = prompt(\"Для доступа к комнате введи пароль\");\r\n        }\r\n\r\n        gameConnection.connectToRoom(connectionData)\r\n            .then(res => this.roomEnteredHandler(res))\r\n            .catch(e => console.error(e));\r\n    };\r\n\r\n    roomEnteredHandler = ({roomID, settings}) => {\r\n        const {dispatch} = this.props;\r\n        let status;\r\n\r\n        settings.roomUrl = `${window.location.origin}/?roomID=${roomID}`;\r\n        settings.roomID = roomID;\r\n\r\n        dispatch(setRoomSettings(settings));\r\n        status && dispatch(setGameStatus(status));\r\n    };\r\n\r\n    leaveRoomHandler = () => {\r\n        gameConnection.emitLeaveRoom()\r\n            .then(() => {\r\n                window.history.pushState(null, 'Home', window.origin);\r\n\r\n                this.props.dispatch(resetState());\r\n\r\n                this.props.dispatch(setGameStatus(gameStatuses.initialServer))\r\n            });\r\n    };\r\n\r\n    leaveRoomButton = () => {\r\n        return (\r\n            <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.leaveRoomHandler()} >\r\n                Вы здесь. Выйти\r\n            </button>\r\n        )\r\n    };\r\n\r\n    knockToRoomButton = (roomID, playerID, isProtected) => {\r\n        const connectionData = { roomID, playerID };\r\n        return (\r\n            <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.knockToRoomHandler(connectionData, isProtected)} >\r\n                Войти\r\n            </button>\r\n        )\r\n    };\r\n\r\n    getRoomsRowsLayout = roomsData => {\r\n        const {roomID, playerID} = this.props;\r\n\r\n        return Object.values(roomsData).map(roomData => {\r\n            return (\r\n                <tr key={roomData.roomID}>\r\n                    <td>\r\n                        <StyledPrivateIcon isPrivate={!!roomData.protected}/>\r\n                        <VerticalAligned>{roomData.name}</VerticalAligned>\r\n                    </td>\r\n                    <td>{roomData.online}/{roomData.size}</td>\r\n                    <td>\r\n                        {\r\n                            roomID ?\r\n                                roomID === roomData.roomID ?\r\n                                    this.leaveRoomButton() :\r\n                                    null :\r\n                                this.knockToRoomButton(roomData.roomID, playerID, roomData.protected)\r\n                        }\r\n                    </td>\r\n                </tr>\r\n            )\r\n        })\r\n    };\r\n\r\n    render() {\r\n        const {onlineRooms} = this.props;\r\n\r\n        return (\r\n            <RoomsTable className={this.props.className + ' table'}>\r\n                <thead>\r\n                <tr>\r\n                    <Col width=\"25%\" scope=\"col\">Room</Col>\r\n                    <Col width=\"25%\" scope=\"col\">Online</Col>\r\n                    <Col width=\"50%\" scope=\"col\">Actions</Col>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                {\r\n                    this.getRoomsRowsLayout(onlineRooms)\r\n                }\r\n                </tbody>\r\n            </RoomsTable>\r\n        );\r\n    }\r\n}\r\n\r\nOnlineRooms.propTypes = {\r\n    dispatch: PropTypes.func.isRequired,\r\n    roomID: PropTypes.string,\r\n    playerID: PropTypes.string,\r\n    onlineRooms: PropTypes.objectOf(PropTypes.shape({\r\n        roomID: PropTypes.string.isRequired,\r\n        name: PropTypes.string.isRequired,\r\n        protected: PropTypes.bool.isRequired,\r\n        online: PropTypes.number.isRequired,\r\n        size: PropTypes.number.isRequired,\r\n    })),\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    onlineRooms: state.onlineRooms,\r\n    roomID: getDeepProp(state, 'settings.roomID'),\r\n    playerID: getDeepProp(state, 'settings.playerID'),\r\n});\r\n\r\nexport default connect(mapStateToProps)(OnlineRooms);","import React from 'react';\r\nimport styled, {css} from 'styled-components/macro';\r\n\r\nimport RoomCreator from '../RoomCreator';\r\nimport OnlineRooms from '../OnlineRooms';\r\n\r\nconst Page = styled.div`\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n`;\r\n\r\nconst Flex = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    @media ${props => props.theme.breakpointUp.lg} {\r\n        flex-direction: row;\r\n        align-items: flex-start; \r\n    }\r\n`;\r\n\r\nconst flexItem = css`\r\n  &:not(:last-child) {\r\n    margin-right: 1rem;\r\n  }\r\n`;\r\n\r\nconst StyledOnlineRooms = styled.div`\r\n  flex-grow: 1;\r\n  width: 100%;\r\n  ${flexItem}\r\n  \r\n  @media ${props => props.theme.breakpointUp.lg} {\r\n    max-width: 500px;\r\n  }\r\n`;\r\n\r\nconst Separator = styled.span`\r\n  font-weight: 300;\r\n  font-size: 2rem;\r\n  line-height: 1.2;\r\n  margin: 3rem 0 1.5rem;\r\n  \r\n  @media ${props => props.theme.breakpointUp.lg} {\r\n    margin: 0 3rem;\r\n  }\r\n`;\r\n\r\nconst PageTitle = styled.h1`\r\n  font-weight: 300;\r\n  text-align: center;\r\n  margin-bottom: 3rem;\r\n`;\r\n\r\nconst TableTitle = styled.h2`\r\n  font-weight: 300;\r\n  margin-bottom: 1.5rem;\r\n`;\r\n\r\n\r\nconst JoinRoomPage = props => {\r\n    return (\r\n        <Page className=\"container\">\r\n            <PageTitle>Hello. This is sea-battle game. Enjoy ^_^</PageTitle>\r\n            <Flex>\r\n                <StyledOnlineRooms>\r\n                    <TableTitle>You can join the existing rooms</TableTitle>\r\n                    <OnlineRooms/>\r\n                </StyledOnlineRooms>\r\n                <Separator>Or...</Separator>\r\n                <div>\r\n                    <TableTitle>Create your own!</TableTitle>\r\n                    <RoomCreator/>\r\n                </div>\r\n            </Flex>\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default JoinRoomPage;","import React, {Component} from 'react';\r\nimport styled from 'styled-components/macro';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from \"react-redux\";\r\nimport Switch from 'rc-switch';\r\nimport 'rc-switch/assets/index.css';\r\n\r\nimport * as ships from \"../../utils/ships\";\r\nimport * as Styled from \"../../styled\";\r\nimport {addPlayerShip, setCurrent, setNotPlacedShips} from \"../../actions\";\r\nimport config from '../../config';\r\nimport {between, eventsBus} from \"../../utils/functions\";\r\nimport {busEvents} from \"../../utils/constants\";\r\nimport {gameConnection} from \"../../utils/gameConnection\";\r\n\r\nconst Container = styled.div`\r\n  display: grid;\r\n  grid-template-rows: repeat(3, min-content);\r\n  grid-gap: 2rem;\r\n`;\r\n\r\nconst NotPlaced = styled.div`\r\n  display: grid;\r\n  grid-template-columns: min-content 1fr;\r\n  grid-auto-rows: min-content;\r\n  grid-gap: .5rem;\r\n`;\r\n\r\nconst Ship = styled(({size, vertical, ...props}) => {\r\n    return (\r\n        <div {...props}>\r\n            {\r\n                [...Array(size)].map((e, i) => <Styled.ShipCell className=\"ship-cell\" key={i}/>)\r\n            }\r\n        </div>\r\n    )\r\n})`\r\n    display: flex;\r\n    width: ${({size}) => `${size}em`};\r\n    transition: transform .2s;\r\n`;\r\n\r\nconst HoverShip = styled(Ship)`\r\n    &:hover {\r\n        cursor: pointer;\r\n        transform: scale(1.1);\r\n    }\r\n`;\r\n\r\nconst CurrentShip = styled(Ship)`\r\n  font-size: 30px;\r\n  transform-origin: .5em .5em;\r\n  transform: ${({vertical}) => vertical ? 'rotate(90deg)' : ''};\r\n`;\r\n\r\nconst Panel = styled.div`\r\n  display: grid;\r\n  grid-template-columns: min-content 1fr;\r\n  grid-gap: 1rem;\r\n  align-items: center;\r\n`;\r\n\r\nconst Title = styled.h2`\r\n  font-weight: 300;\r\n  font-size: 1.5rem;\r\n  line-height: 1;\r\n  margin-bottom: 0;\r\n`;\r\n\r\nconst StyledSwitch = styled(Switch)`\r\n  && {\r\n    border: none;\r\n    background-color: ${({theme}) => theme.inkColor};\r\n  }\r\n  &.rc-switch-checked {\r\n    border: none;\r\n    background-color: ${({theme}) => theme.greenInkColor};\r\n  }\r\n`;\r\n\r\nconst SwitchContainer = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(3, min-content);\r\n  align-items: center;\r\n  grid-gap: .5rem;\r\n`;\r\n\r\nclass ShipPlacementPanel extends Component {\r\n    componentDidMount() {\r\n        const {dispatch} = this.props;\r\n\r\n        const shipsToPlace = {\r\n            // single: [1, 1, 1, 1].map(() => new ships.SingleShip(null, dispatch)),\r\n            // double: [1, 1, 1].map(() => new ships.DoubleShip(null, dispatch)),\r\n            // triple: [1, 1].map(() => new ships.TripleShip(null, dispatch)),\r\n            quadruple: [1].map(() => new ships.QuadrupleShip(null, dispatch)),\r\n        };\r\n\r\n        dispatch(setNotPlacedShips(shipsToPlace));\r\n\r\n        this.unsubscribe = eventsBus.subscribe(\r\n            busEvents.placeShip,\r\n            (x, y) => this.placeShip(x, y, Number(this.props.currentDirection))\r\n        );\r\n\r\n        const nextNotPlaced = this.getNextNotPlaced(shipsToPlace);\r\n\r\n        if (nextNotPlaced) {\r\n            dispatch(setCurrent(nextNotPlaced));\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.unsubscribe();\r\n    }\r\n\r\n    setCurrent = type => {\r\n        const target = this.props.notPlacedShips[type][0];\r\n        if (target) {\r\n            this.props.dispatch(setCurrent(target))\r\n        }\r\n    };\r\n\r\n    getNextNotPlaced = ships => {\r\n        const keys = Object.keys(ships);\r\n\r\n        for (let i = 0; i < keys.length; i++) {\r\n            if (ships[keys[i]][0]) {\r\n                return ships[keys[i]][0]\r\n            }\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    placeShip = (x, y, direction) => {\r\n        const {dispatch, playerShips} = this.props;\r\n\r\n        if (\r\n            !between(x, -1, config.boardSize)\r\n            || !between(y, -1, config.boardSize)\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        const ship = this.props.current;\r\n        ship.pos = {\r\n            x,\r\n            y,\r\n            direction\r\n        };\r\n\r\n        const cache = {...this.props.notPlacedShips};\r\n\r\n        for (let key in cache) {\r\n            let index = cache[key].indexOf(ship);\r\n\r\n            if (index !== -1) {\r\n                const clone = cache[key].slice();\r\n                clone.splice(index, 1);\r\n                cache[key] = clone;\r\n                break;\r\n            }\r\n        }\r\n\r\n        const nextNotPlaced = this.getNextNotPlaced(cache);\r\n\r\n        if (nextNotPlaced) {\r\n            dispatch(setCurrent(nextNotPlaced));\r\n        } else {\r\n            dispatch(setCurrent(null));\r\n\r\n            gameConnection.emitPlacementDone([].concat(playerShips, ship));\r\n        }\r\n\r\n        dispatch(setNotPlacedShips(cache));\r\n        dispatch(addPlayerShip(ship));\r\n    };\r\n\r\n\r\n    render() {\r\n        const {notPlacedShips, current} = this.props;\r\n\r\n        return (\r\n            <Container>\r\n                <Title>Your Navy!</Title>\r\n                <NotPlaced>\r\n                    {\r\n                        notPlacedShips.single &&\r\n                        <>\r\n                            <span>{notPlacedShips.single.length}x</span>\r\n                            <HoverShip onClick={() => this.setCurrent('single')} size={1}/>\r\n                        </>\r\n                    }\r\n\r\n                    {\r\n                        notPlacedShips.double &&\r\n                        <>\r\n                            <span>{notPlacedShips.double.length}x</span>\r\n                            <HoverShip onClick={() => this.setCurrent('double')} size={2}/>\r\n                        </>\r\n                    }\r\n\r\n                    {\r\n                        notPlacedShips.triple &&\r\n                        <>\r\n                            <span>{notPlacedShips.triple.length}x</span>\r\n                            <HoverShip onClick={() => this.setCurrent('triple')} size={3}/>\r\n                        </>\r\n                    }\r\n\r\n                    {\r\n                        notPlacedShips.quadruple &&\r\n                        <>\r\n                            <span>{notPlacedShips.quadruple.length}x</span>\r\n                            <HoverShip onClick={() => this.setCurrent('quadruple')} size={4}/>\r\n                        </>\r\n                    }\r\n                </NotPlaced>\r\n\r\n                {\r\n                    current ?\r\n                        <Panel>\r\n                            <CurrentShip\r\n                                size={current.length}\r\n                                vertical={this.props.currentDirection === '1'}\r\n                            />\r\n                            <SwitchContainer>\r\n                                <span>horizontal</span>\r\n                                <StyledSwitch\r\n                                    onChange={value => this.props.onChangeHandler({\r\n                                        target: {\r\n                                            name: 'direction',\r\n                                            value: value ? '1' : '0'\r\n                                        }\r\n                                    })}\r\n                                />\r\n                                <span>vertical</span>\r\n                            </SwitchContainer>\r\n                        </Panel>\r\n                        :\r\n                        null\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nShipPlacementPanel.propTypes = {\r\n    dispatch: PropTypes.func.isRequired,\r\n    notPlacedShips: PropTypes.object.isRequired,\r\n    current: PropTypes.object,\r\n    playerShips: PropTypes.array,\r\n    onChangeHandler: PropTypes.func.isRequired,\r\n    currentDirection: PropTypes.string.isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    playerShips: state.playerShips,\r\n    notPlacedShips: state.notPlacedShips,\r\n    current: state.current,\r\n});\r\n\r\nexport default connect(mapStateToProps)(ShipPlacementPanel);","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from \"react-redux\";\r\nimport styled from 'styled-components/macro';\r\n\r\nimport * as Styled from \"../../styled\";\r\nimport {eventsBus, mapShipsToGrid, mapToGridShiftBy1, mapToGridShiftBy2, shipPlacementValidator} from \"../../utils/functions\";\r\nimport {hoversGrid, symbols} from \"../../utils/lettersGrid\";\r\nimport {busEvents} from \"../../utils/constants\";\r\nimport ShipPlacementPanel from \"../ShipsPlacementPanel\";\r\n\r\nconst Container = styled.div`\r\n  height: 100%;\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  grid-template-rows: 3fr 2fr;\r\n  place-content: center center;\r\n  grid-gap: 2rem;\r\n  @media ${({theme}) => theme.breakpointUp.md} {\r\n    grid-template-columns: 1fr 1fr;\r\n    grid-template-rows: 40vh;\r\n  }\r\n`;\r\n\r\nclass ShipsPlacementPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            form: {\r\n                direction: '0'\r\n            }\r\n        }\r\n    }\r\n\r\n    onChangeHandler = ({target}) => {\r\n        this.setState({\r\n            form: {\r\n                ...this.state.form,\r\n                [target.name]: target.value\r\n            }\r\n        })\r\n    };\r\n\r\n    flattenPlayerShips = () => {\r\n        return this.props.playerShips.reduce((acc, ship) => {\r\n            return {\r\n                ...acc,\r\n                ...ship.parts\r\n            }\r\n        }, {})\r\n    };\r\n\r\n    getAvailablePlaces = () => {\r\n        const\r\n            {current} = this.props,\r\n            {direction} = this.state.form;\r\n\r\n        if (!current || !direction) {\r\n            return [];\r\n        }\r\n\r\n        const\r\n            playerShips = this.flattenPlayerShips(),\r\n            goingToBePlaced = {\r\n                checkDirection: () => direction == '0',\r\n                length: current.length\r\n            };\r\n\r\n        return hoversGrid.filter(coords => shipPlacementValidator.validate(coords, goingToBePlaced, playerShips))\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Styled.Board>\r\n                    {\r\n                        mapToGridShiftBy2(\r\n                            this.getAvailablePlaces(),\r\n                            () => Styled.ShipPlacementCell,\r\n                            (x, y) => eventsBus.emit(busEvents.placeShip, [x, y])\r\n                        )\r\n                    }\r\n                    {mapToGridShiftBy1(symbols, () => Styled.LetterCell)}\r\n                    {mapShipsToGrid(this.props.playerShips)}\r\n                </Styled.Board>\r\n                <ShipPlacementPanel currentDirection={this.state.form.direction} onChangeHandler={this.onChangeHandler}/>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nShipsPlacementPage.propTypes = {\r\n    dispatch: PropTypes.func.isRequired,\r\n    playerShips: PropTypes.array.isRequired,\r\n    current: PropTypes.object,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    playerShips: state.playerShips,\r\n    current: state.current,\r\n});\r\n\r\nexport default connect(mapStateToProps)(ShipsPlacementPage);","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from \"react-redux\";\n\n\n//Utils\nimport {symbols, hoversGrid} from \"./utils/lettersGrid\";\nimport {\n    eventsBus,\n    mapShipsToGrid,\n    getDeepProp,\n    mapToGridShiftBy1,\n    mapToGridShiftBy2,\n    shotsMapAdapter\n} from \"./utils/functions\";\nimport {gameStatuses, onEvents, busEvents} from \"./utils/constants\";\nimport {gameConnection} from \"./utils/gameConnection\";\nimport {soundsQueue} from './utils/soundsQueue';\nimport soundsBank from './sounds/soundsBank';\n\n//Components\nimport * as Styled from './styled';\nimport ShootTimer from './components/Timer';\nimport SettingsPanel from './components/SettingsPanel/SettingsPanel';\nimport OpponentDisconnectedModal from './components/OpponentDisconnectedModal';\nimport JoinRoomPage from './components/JoinRoomPage';\nimport ShipsPlacementPage from './components/ShipsPlacementPage';\nimport Modal from 'react-modal';\n\n\n//Actions\nimport {\n    setGameStatus,\n    setRoomSettings,\n    addShotToMap,\n    addOpponentShotToMap,\n    assignShooter,\n    addPlayerShip,\n    resetState,\n    toggleOpponentDisconnectedModal,\n    setRoomDestroyDeadline,\n    updateOnlineRooms,\n    setGameResult,\n} from \"./actions\";\nimport {BasicShip} from \"./utils/ships\";\n\nconst customStyles = {\n    overlay: {\n        backgroundColor: 'rgba(0, 0, 0, .6)'\n    },\n    content : {\n        top                   : '50%',\n        left                  : '50%',\n        right                 : 'auto',\n        bottom                : 'auto',\n        marginRight           : '-50%',\n        transform             : 'translate(-50%, -50%)'\n    }\n};\n\nModal.setAppElement('#root');\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            shootTime: null,\n            timerKey: Math.random(),\n            modalIsOpen: false\n        }\n    }\n\n    componentDidMount() {\n        this.initConnection();\n\n        // this.props.dispatch(addShotToMap([\n        //     {\n        //         shipID: 'miss',\n        //         x: 1,\n        //         y: 2,\n        //         type: 'miss'\n        //     },\n        //     {\n        //         shipID: 'miss',\n        //         x: 3,\n        //         y: 4,\n        //         type: 'miss'\n        //     }\n        // ]))\n\n        /*Перед уходом из игры (релоад, выгрузка) сохраняем стейт*/\n        window.addEventListener('beforeunload', this.saveGameSettings);\n    }\n\n    componentWillUnmount() {\n        this.saveGameSettings();\n    }\n\n    initConnection() {\n        gameConnection.events = this.gameEvents;\n        gameConnection.restoreGame = this.restoreGame;\n\n        gameConnection.initConnection()\n            .then(result => {\n                const {playerID, roomID, reconnect} = result;\n                let gameStatus = reconnect ? gameStatuses.active : result.gameStatus;\n\n                if (!playerID) {\n                    throw new Error(`Wrong result after connection init`);\n                }\n\n                this.props.dispatch(setRoomSettings({playerID, roomID}));\n                gameStatus && this.props.dispatch(setGameStatus(gameStatus));\n            })\n            .catch(({playerID}) => {\n                this.leaveRoom({\n                    settings: {playerID},\n                    status: gameStatuses.initialServer\n                });\n            })\n    }\n\n    /*Сохранение/восстановление*/\n    saveGameSettings = () => {\n        if (this.props.gameStatus === gameStatuses.active) {\n            localStorage.setItem(\n                `game_save`,\n                JSON.stringify({\n                    playerID: this.props.playerID,\n                    roomID: this.props.roomID\n                })\n            );\n        } else {\n            localStorage.removeItem(`game_save`);\n        }\n    };\n\n    restoreGame = data => {\n        const\n            shipsMap = data.shipsMap.ships,\n            {opponentShotsMap, playerShotsMap, roomID, playerID} = data,\n            {dispatch} = this.props;\n\n\n        dispatch(addOpponentShotToMap(opponentShotsMap));\n        dispatch(addShotToMap(playerShotsMap));\n        dispatch(setRoomSettings({roomID, playerID}));\n\n        shipsMap\n            .map(shipData => BasicShip.recreate(shipData, dispatch))\n            .forEach(ship => this.props.dispatch(addPlayerShip(ship)));\n    };\n\n\n    /*Socket.io events*/\n    get gameEvents() {\n        //Default events\n        // socket.on(onEvents.connectError, this.connectErrorHandler);\n        // socket.on(onEvents.reconnect, this.socketReconnectHandler);\n        return [\n            {\n                eventName: onEvents.startShipsPlacement,\n                eventHandler: this.startShipPlacementHandler\n            },\n            {\n                eventName: onEvents.startGame,\n                eventHandler: this.startGameHandler\n            },\n            {\n                eventName: onEvents.opponentShoot,\n                eventHandler: this.opponentShootHandler\n            },\n            {\n                eventName: onEvents.assignShooter,\n                eventHandler: this.assignShooterHandler\n            },\n            {\n                eventName: 'opponentDisconnect',\n                eventHandler: ({deadline}) => {\n                    if (!this.props.opponentDisconnectedModalOpen) {\n                        this.props.dispatch(setRoomDestroyDeadline(deadline));\n                        this.props.dispatch(toggleOpponentDisconnectedModal(true));\n                    }\n                }\n            },\n            {\n                eventName: 'roomDestroyed',\n                eventHandler: () => this.resetGameState()\n            },\n            {\n                eventName: 'roomUpdated',\n                eventHandler: roomsData => this.props.dispatch(updateOnlineRooms(roomsData))\n            },\n            {\n                eventName: 'gameOver',\n                eventHandler: ({stats}) => {\n                    this.toggleModal(true);\n                    this.props.dispatch(setGameResult(stats));\n                }\n            }\n        ]\n    };\n\n    startShipPlacementHandler = () => {\n        this.props.dispatch(setGameStatus(gameStatuses.shipPlacement));\n    };\n\n    opponentShootHandler = shot => {\n        const result = eventsBus.emit(busEvents.opponentShoot, shot).filter(el => !!el);\n        if (!result.length) {\n            this.props.dispatch(addOpponentShotToMap({x: shot[0], y: shot[1], type: 'miss'}))\n        }\n    };\n\n    startGameHandler = () => {\n        const {dispatch, opponentDisconnectedModalOpen} = this.props;\n        dispatch(setGameStatus(gameStatuses.active));\n        if (opponentDisconnectedModalOpen) {\n            dispatch(toggleOpponentDisconnectedModal(false));\n        }\n    };\n\n    assignShooterHandler = (shooterID, shootTime) => {\n        this.setState({\n            shootTime,\n            timerKey: Math.random()\n        });\n        this.props.dispatch(assignShooter(this.props.playerID === shooterID));\n    };\n\n    shoot = (x, y) => {\n        return new Promise(resolve => gameConnection.emitShot([x, y], resolve))\n            .then(result => {\n                if (!result || result.error) {\n                    throw new Error(result.error);\n                }\n\n                if (result.length) {\n                    const shots = result.map(shot => {\n                        const {x, y, type, shipID} = shot;\n                        return {x, y, type, shipID};\n                    });\n                    this.playSoundType(shots[0].type);\n\n                    this.props.dispatch(addShotToMap(shots));\n                } else {\n                    this.playSoundType('miss');\n                    this.props.dispatch(addShotToMap([{\n                        shipID: 'miss',\n                        x,\n                        y,\n                        type: 'miss'\n                    }]));\n                }\n            })\n            .catch(e => console.error(e));\n    };\n\n    leaveRoom = (options = {}) => {\n        gameConnection.emitLeaveRoom()\n            .then(() => this.resetGameState(options))\n\n    };\n\n    resetGameState = (options = {}) => {\n        window.history.pushState(null, 'Home', window.origin);\n\n        this.setState({modalIsOpen: false});\n\n        this.props.dispatch(resetState());\n\n        this.props.dispatch(setRoomSettings({\n            ...options.settings\n        }));\n\n        this.props.dispatch(setGameStatus(options.status || gameStatuses.initialServer))\n    };\n\n    playSoundType = type => {\n        soundsQueue.volume = this.props.volume;\n        soundsQueue.play(soundsBank.getRandomWithType(type));\n    };\n\n    toggleModal = open => {\n        this.setState({\n            modalIsOpen: open !== undefined ? open : !this.state.modalIsOpen\n        });\n    };\n\n    endGameHandler = () => {\n        this.toggleModal(false);\n        this.leaveRoom();\n    };\n\n    render() {\n        const\n            {gameStatus, iAmShooter, gameResult} = this.props,\n            {shootTime} = this.state;\n\n        return (\n            <Styled.App>\n                <Styled.GlobalStyle/>\n\n                <SettingsPanel/>\n\n                <OpponentDisconnectedModal\n                    onConfirmLeaveRoom={this.leaveRoom}\n                />\n\n                {\n                    gameStatus === gameStatuses.initialServer &&\n                    <JoinRoomPage/>\n                }\n\n                {\n                    gameStatus === gameStatuses.shipPlacement &&\n                    <ShipsPlacementPage/>\n                }\n\n                {\n                    gameStatus !== gameStatuses.initialServer &&\n                    <Styled.Grid>\n                        {\n                            gameStatus === gameStatuses.active &&\n                            <>\n                                {\n                                    gameResult &&\n                                    <Modal\n                                        isOpen={this.state.modalIsOpen}\n                                        onRequestClose={() => this.endGameHandler()}\n                                        style={customStyles}\n                                    >\n                                        <h2>\n                                            {\n                                                gameResult.aliveShipsCount ?\n                                                    'Поздравляем, вы выиграли!' :\n                                                    'Сорян, вы проиграли'\n                                            }\n                                        </h2>\n                                        <pre>{JSON.stringify(gameResult)}</pre>\n                                    </Modal>\n                                }\n                                <button onClick={this.leaveRoom}>\n                                    stop game\n                                </button>\n                                <Styled.MyBoard>\n                                    {mapToGridShiftBy1(symbols, () => Styled.LetterCell)}\n                                    {\n                                        mapToGridShiftBy2(\n                                            this.props.opponentShotsMap,\n                                            () => Styled.ShotMissCell\n                                        )\n                                    }\n                                    {mapShipsToGrid(this.props.playerShips)}\n                                </Styled.MyBoard>\n                                <Styled.OpponentBoard>\n                                    {\n                                        mapToGridShiftBy1(\n                                            symbols,\n                                            () => Styled.LetterCell,\n                                        )\n                                    }\n                                    {\n                                        mapToGridShiftBy2(\n                                            hoversGrid,\n                                            () => Styled.AimCell,\n                                            this.shoot\n                                        )\n                                    }\n                                    {\n                                        mapToGridShiftBy2(\n                                            shotsMapAdapter(this.props.shotsMap),\n                                            ({type}) => {\n\n                                                switch (type) {\n                                                    case 'hit':\n                                                        return Styled.ShotHitCell;\n                                                    case 'miss':\n                                                        return Styled.ShotMissCell;\n                                                    case 'kill':\n                                                        return Styled.ShipDieCell;\n                                                    default:\n                                                        return props => <p>Ы</p>\n                                                }\n                                            },\n                                        )\n                                    }\n                                </Styled.OpponentBoard>\n                                <Styled.MoveIndicator shooter={iAmShooter}/>\n                                {\n                                    shootTime &&\n                                    <ShootTimer key={this.state.timerKey} deadline={shootTime}/>\n                                }\n                            </>\n                        }\n                    </Styled.Grid>\n                }\n            </Styled.App>\n        );\n    }\n}\n\nApp.propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    playerShips: PropTypes.array.isRequired,\n    gameStatus: PropTypes.number.isRequired,\n    roomID: PropTypes.string,\n    playerID: PropTypes.string,\n\n    shotsMap: PropTypes.object.isRequired,\n    opponentShotsMap: PropTypes.array.isRequired,\n    iAmShooter: PropTypes.bool,\n    volume: PropTypes.number.isRequired,\n    opponentDisconnectedModalOpen: PropTypes.bool.isRequired,\n    gameResult: PropTypes.object,\n};\n\nconst mapStateToProps = state => ({\n    playerShips: state.playerShips,\n    phase: state.phase,\n    gameStatus: getDeepProp(state, 'status.gameStatus'),\n    roomID: getDeepProp(state, 'settings.roomID'),\n    playerID: getDeepProp(state, 'settings.playerID'),\n    shotsMap: state.shotsMap,\n    opponentShotsMap: state.opponentShotsMap,\n    iAmShooter: state.iAmShooter,\n    volume: state.volume,\n    opponentDisconnectedModalOpen: state.opponentDisconnectedModalOpen,\n    gameResult: state.gameResult\n});\n\nexport default connect(mapStateToProps)(App);\n","import * as C from '../actions/actionTypes';\r\nimport {createReducer} from \"../utils/functions\";\r\n\r\nconst initialState = {\r\n    notPlacedShips: {},\r\n    playerShips: [],\r\n    shotsMap: {},\r\n    opponentShotsMap: [],\r\n    current: null,\r\n    iAmShooter: null,\r\n    volume: 0.5,\r\n    opponentDisconnectedModalOpen: false,\r\n    roomDestroyDeadline: null,\r\n    onlineRooms: {},\r\n    gameResult: null,\r\n    settings: {\r\n        chatEnable: undefined,\r\n        maxScore: undefined,\r\n        roomID: undefined,\r\n        roomURL: undefined,\r\n        playerID: undefined,\r\n        side: undefined\r\n    },\r\n    status: {\r\n        gameStatus: -1\r\n    }\r\n};\r\n\r\nconst setNotDistributedShips = (state, {ships}) => ({\r\n    ...state,\r\n    notPlacedShips: ships\r\n});\r\n\r\nconst addPlayerShip = (state, {ship}) => ({\r\n    ...state,\r\n    playerShips: state.playerShips.concat(JSON.parse(JSON.stringify(ship)))\r\n});\r\n\r\nconst updatePlayerShip = (state, {ship}) => ({\r\n    ...state,\r\n    playerShips: JSON.parse(JSON.stringify([].concat( //TODO think about the object immutability\r\n        state.playerShips.filter(({id}) => id !== ship.id),\r\n        ship\r\n    )))\r\n});\r\n\r\nconst setCurrent = (state, {ship}) => ({\r\n    ...state,\r\n    current: ship\r\n});\r\n\r\nconst setRoomSettings = (state, {settings}) => ({\r\n    ...state,\r\n    settings: {\r\n        ...state.settings,\r\n        ...settings\r\n    }\r\n});\r\n\r\nconst setGameStatus = (state, {status}) => ({\r\n    ...state,\r\n    status: {\r\n        ...state.status,\r\n        gameStatus: status\r\n    }\r\n});\r\n\r\nconst addShotToMap = (state, {shots}) => {\r\n    const shotsMap = shots.reduce((acc, shot) => {\r\n        acc[shot.shipID] = {\r\n            ...acc[shot.shipID],\r\n            [`${shot.x};${shot.y}`]: {\r\n                x: shot.x,\r\n                y: shot.y,\r\n                type: shot.type\r\n            }\r\n        };\r\n        return acc;\r\n    }, {...state.shotsMap});\r\n\r\n    return {\r\n        ...state,\r\n        shotsMap\r\n    }\r\n};\r\n\r\nconst addOpponentShotToMap = (state, {shot}) => ({\r\n    ...state,\r\n    opponentShotsMap: state.opponentShotsMap.concat(shot)\r\n});\r\n\r\nconst assignShooter = (state, {iAmShooter}) => ({\r\n    ...state,\r\n    iAmShooter\r\n});\r\n\r\nconst setVolume = (state, {volume}) => ({\r\n    ...state,\r\n    volume\r\n});\r\n\r\nconst resetState = state => ({\r\n    ...initialState,\r\n    onlineRooms: state.onlineRooms,\r\n    settings: {\r\n        ...initialState.settings,\r\n        playerID: state.settings.playerID,\r\n    }\r\n});\r\n\r\n\r\nconst toggleOpponentDisconnectedModal = (state, {isOpen}) => ({\r\n    ...state,\r\n    opponentDisconnectedModalOpen: isOpen\r\n});\r\n\r\nconst setRoomDestroyDeadline = (state, {deadline}) => ({\r\n    ...state,\r\n    roomDestroyDeadline: deadline\r\n});\r\n\r\nconst updateOnlineRooms = (state, {roomsData}) => {\r\n    const updatedOnlineRooms = {...state.onlineRooms};\r\n\r\n    roomsData.forEach(roomData => {\r\n        if (roomData.delete) {\r\n            delete updatedOnlineRooms[roomData.roomID]\r\n        } else {\r\n            updatedOnlineRooms[roomData.roomID] = {...roomData}\r\n        }\r\n    });\r\n\r\n    return {\r\n        ...state,\r\n        onlineRooms: updatedOnlineRooms\r\n    };\r\n};\r\n\r\nconst setGameResult = (state, {stats}) => ({\r\n    ...state,\r\n    gameResult: stats\r\n});\r\n\r\nconst handlers = {\r\n    [C.SET_NOT_DISTRIBUTED_SHIPS]: setNotDistributedShips,\r\n    [C.ADD_PLAYER_SHIP]: addPlayerShip,\r\n    [C.UPDATE_PLAYER_SHIP]: updatePlayerShip,\r\n    [C.SET_CURRENT]: setCurrent,\r\n    [C.SET_ROOM_SETTINGS]: setRoomSettings,\r\n    [C.SET_GAME_STATUS]: setGameStatus,\r\n    [C.ADD_SHOT_TO_MAP]: addShotToMap,\r\n    [C.ADD_OPPONENT_SHOT_TO_MAP]: addOpponentShotToMap,\r\n    [C.ASSIGN_SHOOTER]: assignShooter,\r\n    [C.RESET_STATE]: resetState,\r\n    [C.SET_VOLUME]: setVolume,\r\n    [C.TOGGLE_OPPONENT_DISCONNECTED_MODAL]: toggleOpponentDisconnectedModal,\r\n    [C.SET_ROOM_DESTROY_DEADLINE]: setRoomDestroyDeadline,\r\n    [C.UPDATE_ONLINE_ROOMS]: updateOnlineRooms,\r\n    [C.SET_GAME_RESULT]: setGameResult,\r\n};\r\n\r\nconst reducer = createReducer(initialState, handlers);\r\n\r\nexport default reducer;","import {applyMiddleware, createStore} from \"redux\";\r\nimport reducer from '../reducers';\r\nimport {composeWithDevTools} from \"redux-devtools-extension/developmentOnly\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\n\r\n\r\nconst store = createStore(\r\n    reducer,\r\n    composeWithDevTools(\r\n        applyMiddleware(\r\n            thunkMiddleware\r\n        )\r\n    )\r\n);\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport {ThemeProvider} from 'styled-components';\n\nimport App from './App';\nimport store from './store';\nimport 'input-range-scss';\nimport './scss/bootstrap.scss';\nimport {theme} from \"./styled\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <ThemeProvider theme={theme}>\n            <App/>\n        </ThemeProvider>\n    </Provider>,\n    document.getElementById('root')\n);\n\n","module.exports = __webpack_public_path__ + \"static/media/paper.82f5918b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/miss2.44983578.mp3\";","module.exports = __webpack_public_path__ + \"static/media/miss3.eb16e8d9.mp3\";","module.exports = __webpack_public_path__ + \"static/media/shipHit.175ec828.wav\";"],"sourceRoot":""}